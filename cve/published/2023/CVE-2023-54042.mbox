From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-54042: powerpc/64s: Fix VAS mm use after free
Message-Id: <2025122440-CVE-2023-54042-2617@gregkh>
Content-Length: 2498
Lines: 54
X-Developer-Signature: v=1; a=openpgp-sha256; l=2553;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=nYnobemfSFjWd9fe0XSBWjSPHhOL+eNtmD1dCi9gzR0=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDJnex1508KfVRikc5fyYutdddZ759diDm/UPC+xcN0Hz0
 In4v2tyOmJZGASZGGTFFFm+bOM5ur/ikKKXoe1pmDmsTCBDGLg4BWAis1wYFuw9M0vjm1LyCqGQ
 J5E2xh9yzEJ16hnmh73aav+Y4WpfxIT1+Q2TFL7d2nNkJwA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

powerpc/64s: Fix VAS mm use after free

The refcount on mm is dropped before the coprocessor is detached.

The Linux kernel CVE team has assigned CVE-2023-54042 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.14 with commit 7bc6f71bdff5f8921e324da0a8fad6f4e2e63a85 and fixed in 5.15.121 with commit f7d92313002b2d543500cc417d8079aaed1fb0a8
	Issue introduced in 5.14 with commit 7bc6f71bdff5f8921e324da0a8fad6f4e2e63a85 and fixed in 6.1.39 with commit 4e82f92c349ea603736ade1e814861c0182a55ad
	Issue introduced in 5.14 with commit 7bc6f71bdff5f8921e324da0a8fad6f4e2e63a85 and fixed in 6.3.13 with commit db8657fdd53c5e3069149d7f957cb60e63027bb2
	Issue introduced in 5.14 with commit 7bc6f71bdff5f8921e324da0a8fad6f4e2e63a85 and fixed in 6.4.4 with commit 421cd1544480f2458042fe7f4913a2069c4d7251
	Issue introduced in 5.14 with commit 7bc6f71bdff5f8921e324da0a8fad6f4e2e63a85 and fixed in 6.5 with commit b4bda59b47879cce38a6ec5a01cd3cac702b5331

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-54042
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	arch/powerpc/platforms/powernv/vas-window.c
	arch/powerpc/platforms/pseries/vas.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/f7d92313002b2d543500cc417d8079aaed1fb0a8
	https://git.kernel.org/stable/c/4e82f92c349ea603736ade1e814861c0182a55ad
	https://git.kernel.org/stable/c/db8657fdd53c5e3069149d7f957cb60e63027bb2
	https://git.kernel.org/stable/c/421cd1544480f2458042fe7f4913a2069c4d7251
	https://git.kernel.org/stable/c/b4bda59b47879cce38a6ec5a01cd3cac702b5331
