From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-54109: media: rcar_fdp1: Fix refcount leak in probe and remove function
Message-Id: <2025122412-CVE-2023-54109-714c@gregkh>
Content-Length: 3328
Lines: 63
X-Developer-Signature: v=1; a=openpgp-sha256; l=3392;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=kHuGlHumWNBPFMpzjdAfZ4pYVNp9hbIbOu/fUSi0fgo=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDJneT12X5//jY/seHCdbcX/608OLlr6R5PDvnFq6ofbaE
 7ecdYLbOmJZGASZGGTFFFm+bOM5ur/ikKKXoe1pmDmsTCBDGLg4BWAiezsZ5pm80dnxS8VKIf/E
 Q/6+jY/nBMXbsDEsODP7miTn9be3HqdNfhyu+a5djWuGIwA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

media: rcar_fdp1: Fix refcount leak in probe and remove function

rcar_fcp_get() take reference, which should be balanced with
rcar_fcp_put(). Add missing rcar_fcp_put() in fdp1_remove and
the error paths of fdp1_probe() to fix this.

[hverkuil: resolve merge conflict, remove() is now void]

The Linux kernel CVE team has assigned CVE-2023-54109 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.10 with commit 4710b752e029f3f82dd4a84d9dc61fe72c97bf82 and fixed in 4.19.283 with commit 418a8f3140e07f33bbd5a81625d0ef46c0732cef
	Issue introduced in 4.10 with commit 4710b752e029f3f82dd4a84d9dc61fe72c97bf82 and fixed in 5.4.243 with commit 9df630dafa1a59946d1da6f070d4cb64f14ea57c
	Issue introduced in 4.10 with commit 4710b752e029f3f82dd4a84d9dc61fe72c97bf82 and fixed in 5.10.180 with commit 1acb982e3616e70128994fdecf2368a259c8a489
	Issue introduced in 4.10 with commit 4710b752e029f3f82dd4a84d9dc61fe72c97bf82 and fixed in 5.15.111 with commit 2322b262d2205720518785c2706a3283725ba402
	Issue introduced in 4.10 with commit 4710b752e029f3f82dd4a84d9dc61fe72c97bf82 and fixed in 6.1.28 with commit 45b7461d914c867ef21c74798da8c42d13d3a0df
	Issue introduced in 4.10 with commit 4710b752e029f3f82dd4a84d9dc61fe72c97bf82 and fixed in 6.2.15 with commit 59c6addfaaaa09ff7654e4d8793cb16fd22a46d4
	Issue introduced in 4.10 with commit 4710b752e029f3f82dd4a84d9dc61fe72c97bf82 and fixed in 6.3.2 with commit 48765ca7c6b71bf73a4cc8475a4bad9e2633cf61
	Issue introduced in 4.10 with commit 4710b752e029f3f82dd4a84d9dc61fe72c97bf82 and fixed in 6.4 with commit c766c90faf93897b77c9c5daa603cffab85ba907

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-54109
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/media/platform/renesas/rcar_fdp1.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/418a8f3140e07f33bbd5a81625d0ef46c0732cef
	https://git.kernel.org/stable/c/9df630dafa1a59946d1da6f070d4cb64f14ea57c
	https://git.kernel.org/stable/c/1acb982e3616e70128994fdecf2368a259c8a489
	https://git.kernel.org/stable/c/2322b262d2205720518785c2706a3283725ba402
	https://git.kernel.org/stable/c/45b7461d914c867ef21c74798da8c42d13d3a0df
	https://git.kernel.org/stable/c/59c6addfaaaa09ff7654e4d8793cb16fd22a46d4
	https://git.kernel.org/stable/c/48765ca7c6b71bf73a4cc8475a4bad9e2633cf61
	https://git.kernel.org/stable/c/c766c90faf93897b77c9c5daa603cffab85ba907
