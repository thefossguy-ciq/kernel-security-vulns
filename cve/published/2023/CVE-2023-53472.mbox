From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53472: pwm: lpc32xx: Remove handling of PWM channels

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

pwm: lpc32xx: Remove handling of PWM channels

Because LPC32xx PWM controllers have only a single output which is
registered as the only PWM device/channel per controller, it is known in
advance that pwm->hwpwm value is always 0. On basis of this fact
simplify the code by removing operations with pwm->hwpwm, there is no
controls which require channel number as input.

Even though I wasn't aware at the time when I forward ported that patch,
this fixes a null pointer dereference as lpc32xx->chip.pwms is NULL
before devm_pwmchip_add() is called.

The Linux kernel CVE team has assigned CVE-2023-53472 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.14.248 with commit bb4de81eb940e7027f37a6fd3b7ddcb4403deb56 and fixed in 4.14.326 with commit abd9b2ee4047ccd980decbf26d61f9637604b1d5
	Issue introduced in 4.19.208 with commit 4459118977665f681017e1299933895d54b6e87b and fixed in 4.19.295 with commit a9a505f5b39d8fff1a55963a5e524c84639e98b2
	Issue introduced in 5.4.149 with commit 81e6b51709da162b94e40a445bb60856406beaa1 and fixed in 5.4.257 with commit 04301da4d87067a989f70ee56942bf9d97cd2a45
	Issue introduced in 5.10.69 with commit 322b70b522abe03cd59712bb47a72eddd835d19d and fixed in 5.10.195 with commit a2d9d884e84bfd37892219b1f55847f36d8e9901
	Issue introduced in 5.15 with commit 3d2813fb17e5fd0d73c1d1442ca0192bde4af10e and fixed in 5.15.132 with commit 5e22217c11424ef958ba28d03ff7167b4d7a8914
	Issue introduced in 5.15 with commit 3d2813fb17e5fd0d73c1d1442ca0192bde4af10e and fixed in 6.1.54 with commit 523f6268e86552a048975749251184c4e9a4b38f
	Issue introduced in 5.15 with commit 3d2813fb17e5fd0d73c1d1442ca0192bde4af10e and fixed in 6.5.4 with commit e3a0ddbaf7f1f9ffc070718b417461ced3268758
	Issue introduced in 5.15 with commit 3d2813fb17e5fd0d73c1d1442ca0192bde4af10e and fixed in 6.6 with commit 4aae44f65827f0213a7361cf9c32cfe06114473f
	Issue introduced in 4.9.284 with commit 7fc2172ad4e701d3c6e7dcb7b2efd8df71d2417b
	Issue introduced in 5.14.8 with commit 1c90a357cef4219cb436e59cc7463888103e104b

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53472
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/pwm/pwm-lpc32xx.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/abd9b2ee4047ccd980decbf26d61f9637604b1d5
	https://git.kernel.org/stable/c/a9a505f5b39d8fff1a55963a5e524c84639e98b2
	https://git.kernel.org/stable/c/04301da4d87067a989f70ee56942bf9d97cd2a45
	https://git.kernel.org/stable/c/a2d9d884e84bfd37892219b1f55847f36d8e9901
	https://git.kernel.org/stable/c/5e22217c11424ef958ba28d03ff7167b4d7a8914
	https://git.kernel.org/stable/c/523f6268e86552a048975749251184c4e9a4b38f
	https://git.kernel.org/stable/c/e3a0ddbaf7f1f9ffc070718b417461ced3268758
	https://git.kernel.org/stable/c/4aae44f65827f0213a7361cf9c32cfe06114473f
