From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53725: clocksource/drivers/cadence-ttc: Fix memory leak in ttc_timer_probe
Message-Id: <2025102215-CVE-2023-53725-0343@gregkh>
Content-Length: 3444
Lines: 65
X-Developer-Signature: v=1; a=openpgp-sha256; l=3510;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=2TpNCP44Pq4XbCkenuo5zg7vauCPWuYQCMJCEq89Mlk=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBk/bv0v+P/mHVdJ5pe8Wp/uoz+VDWzbrO8G3HvNvlkq3
 n3jxjndHbEsDIJMDLJiiixftvEc3V9xSNHL0PY0zBxWJpAhDFycAjCRq/YMC+adPqHZOrU8Tr/1
 y6w3285k/bzsz8UwV2qv+rQY1+x+hckFV+ZEbZ+2S+fDDgA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

clocksource/drivers/cadence-ttc: Fix memory leak in ttc_timer_probe

Smatch reports:
drivers/clocksource/timer-cadence-ttc.c:529 ttc_timer_probe()
warn: 'timer_baseaddr' from of_iomap() not released on lines: 498,508,516.

timer_baseaddr may have the problem of not being released after use,
I replaced it with the devm_of_iomap() function and added the clk_put()
function to cleanup the "clk_ce" and "clk_cs".

The Linux kernel CVE team has assigned CVE-2023-53725 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.10 with commit e932900a3279b5dbb6d8f43c7b369003620e137c and fixed in 4.19.291 with commit e0a9cc90ea44a50d76a84f9f9bf1703d31fe45e9
	Issue introduced in 3.10 with commit e932900a3279b5dbb6d8f43c7b369003620e137c and fixed in 5.4.251 with commit 54cc10a0f4b01b522e9519014200f1b33bf7e4aa
	Issue introduced in 3.10 with commit e932900a3279b5dbb6d8f43c7b369003620e137c and fixed in 5.10.188 with commit ebdff0986513a29be242aace0ef89b6c105b0bf0
	Issue introduced in 3.10 with commit e932900a3279b5dbb6d8f43c7b369003620e137c and fixed in 5.15.121 with commit 289e2054eeb63c9e133960731c342eeffad218d3
	Issue introduced in 3.10 with commit e932900a3279b5dbb6d8f43c7b369003620e137c and fixed in 6.1.39 with commit 919dd531ebb7514f205ae7aab87994337ebce1f6
	Issue introduced in 3.10 with commit e932900a3279b5dbb6d8f43c7b369003620e137c and fixed in 6.3.13 with commit 67d7eebbc424935dec61fb352d1ccae5d16cf429
	Issue introduced in 3.10 with commit e932900a3279b5dbb6d8f43c7b369003620e137c and fixed in 6.4.4 with commit 99744200f28b2cf5f50767447e51b4b4a977d145
	Issue introduced in 3.10 with commit e932900a3279b5dbb6d8f43c7b369003620e137c and fixed in 6.5 with commit 8b5bf64c89c7100c921bd807ba39b2eb003061ab

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53725
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/clocksource/timer-cadence-ttc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/e0a9cc90ea44a50d76a84f9f9bf1703d31fe45e9
	https://git.kernel.org/stable/c/54cc10a0f4b01b522e9519014200f1b33bf7e4aa
	https://git.kernel.org/stable/c/ebdff0986513a29be242aace0ef89b6c105b0bf0
	https://git.kernel.org/stable/c/289e2054eeb63c9e133960731c342eeffad218d3
	https://git.kernel.org/stable/c/919dd531ebb7514f205ae7aab87994337ebce1f6
	https://git.kernel.org/stable/c/67d7eebbc424935dec61fb352d1ccae5d16cf429
	https://git.kernel.org/stable/c/99744200f28b2cf5f50767447e51b4b4a977d145
	https://git.kernel.org/stable/c/8b5bf64c89c7100c921bd807ba39b2eb003061ab
