From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53436: scsi: snic: Fix possible memory leak if device_add() fails
Message-Id: <2025091858-CVE-2023-53436-d294@gregkh>
Content-Length: 3356
Lines: 62
X-Developer-Signature: v=1; a=openpgp-sha256; l=3419;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=dS0D9zqsNRdblQtHZNw81ExvYkiw4QxDJE4stGnUCik=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBlndPOcE7V37dfPzS72+cEqLnFFzovrlX9Okd28ReZiJ
 RmO6290xLIwCDIxyIopsnzZxnN0f8UhRS9D29Mwc1iZQIYwcHEKwETctzHMFSzp32b8uGblws2X
 96xb7v8oLVP8JsP87OKSDV+7SgVeLsmZw7vpzntR79evAA==
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

scsi: snic: Fix possible memory leak if device_add() fails

If device_add() returns error, the name allocated by dev_set_name() needs
be freed. As the comment of device_add() says, put_device() should be used
to give up the reference in the error path. So fix this by calling
put_device(), then the name can be freed in kobject_cleanp().

The Linux kernel CVE team has assigned CVE-2023-53436 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.2 with commit c8806b6c9e824f47726f2a9b7fbbe7ebf19306fa and fixed in 4.14.323 with commit 789275f7c0544374d40bc8d9c81f96751a41df45
	Issue introduced in 4.2 with commit c8806b6c9e824f47726f2a9b7fbbe7ebf19306fa and fixed in 4.19.292 with commit f830968d464f55e11bc9260a132fc77daa266aa3
	Issue introduced in 4.2 with commit c8806b6c9e824f47726f2a9b7fbbe7ebf19306fa and fixed in 5.4.254 with commit cea09922f5f75652d55b481ee34011fc7f19868b
	Issue introduced in 4.2 with commit c8806b6c9e824f47726f2a9b7fbbe7ebf19306fa and fixed in 5.10.191 with commit 58889d5ad74cbc1c9595db74e13522b58b69b0ec
	Issue introduced in 4.2 with commit c8806b6c9e824f47726f2a9b7fbbe7ebf19306fa and fixed in 5.15.127 with commit 461f8ac666fa232afee5ed6420099913ec4e4ba2
	Issue introduced in 4.2 with commit c8806b6c9e824f47726f2a9b7fbbe7ebf19306fa and fixed in 6.1.46 with commit 7723a5d5d187626c4c640842e522cf4e9e39492e
	Issue introduced in 4.2 with commit c8806b6c9e824f47726f2a9b7fbbe7ebf19306fa and fixed in 6.4.11 with commit ed0acb1ee2e9322b96611635a9ca9303d15ac76c
	Issue introduced in 4.2 with commit c8806b6c9e824f47726f2a9b7fbbe7ebf19306fa and fixed in 6.5 with commit 41320b18a0e0dfb236dba4edb9be12dba1878156

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53436
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/scsi/snic/snic_disc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/789275f7c0544374d40bc8d9c81f96751a41df45
	https://git.kernel.org/stable/c/f830968d464f55e11bc9260a132fc77daa266aa3
	https://git.kernel.org/stable/c/cea09922f5f75652d55b481ee34011fc7f19868b
	https://git.kernel.org/stable/c/58889d5ad74cbc1c9595db74e13522b58b69b0ec
	https://git.kernel.org/stable/c/461f8ac666fa232afee5ed6420099913ec4e4ba2
	https://git.kernel.org/stable/c/7723a5d5d187626c4c640842e522cf4e9e39492e
	https://git.kernel.org/stable/c/ed0acb1ee2e9322b96611635a9ca9303d15ac76c
	https://git.kernel.org/stable/c/41320b18a0e0dfb236dba4edb9be12dba1878156
