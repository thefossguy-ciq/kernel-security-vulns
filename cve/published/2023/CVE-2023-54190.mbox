From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-54190: leds: led-core: Fix refcount leak in of_led_get()
Message-Id: <2025123027-CVE-2023-54190-7c7d@gregkh>
Content-Length: 2534
Lines: 55
X-Developer-Signature: v=1; a=openpgp-sha256; l=2590;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=/GIHs620DLHDjq7wEZA0bXHxOEQ9beDlBi3whsf3scA=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDJnBB76r535g6PSdu/L46dddFb4Pyvaxxb29/PlHQ8lOh
 /N3Xlc4dcSyMAgyMciKKbJ82cZzdH/FIUUvQ9vTMHNYmUCGMHBxCsBESp0Z5gpkaDjs19X106uv
 Wdnm0vL+g6rQVYb5kfM3t1rpbuKb825X4kJfEd4nSmJ3AQ==
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

leds: led-core: Fix refcount leak in of_led_get()

class_find_device_by_of_node() calls class_find_device(), it will take
the reference, use the put_device() to drop the reference when not need
anymore.

The Linux kernel CVE team has assigned CVE-2023-54190 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.6 with commit 699a8c7c4bd376aee4808e6272188319e900c8af and fixed in 5.10.173 with commit 1d6101d9222e1ca8c01b3fa9ebf0dcf7bcd82564
	Issue introduced in 5.6 with commit 699a8c7c4bd376aee4808e6272188319e900c8af and fixed in 5.15.99 with commit 690efcb5827c3bacbf1de90cd14907b91bf8cb7b
	Issue introduced in 5.6 with commit 699a8c7c4bd376aee4808e6272188319e900c8af and fixed in 6.1.16 with commit d880981b82223f9bf128dfdd2424abb0c658f345
	Issue introduced in 5.6 with commit 699a8c7c4bd376aee4808e6272188319e900c8af and fixed in 6.2.3 with commit ddf3e82164afd9381b1d52c9f00b3878f7b6d308
	Issue introduced in 5.6 with commit 699a8c7c4bd376aee4808e6272188319e900c8af and fixed in 6.3 with commit da1afe8e6099980fe1e2fd7436dca284af9d3f29

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-54190
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/leds/led-class.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/1d6101d9222e1ca8c01b3fa9ebf0dcf7bcd82564
	https://git.kernel.org/stable/c/690efcb5827c3bacbf1de90cd14907b91bf8cb7b
	https://git.kernel.org/stable/c/d880981b82223f9bf128dfdd2424abb0c658f345
	https://git.kernel.org/stable/c/ddf3e82164afd9381b1d52c9f00b3878f7b6d308
	https://git.kernel.org/stable/c/da1afe8e6099980fe1e2fd7436dca284af9d3f29
