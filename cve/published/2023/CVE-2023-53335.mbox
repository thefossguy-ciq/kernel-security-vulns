From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53335: RDMA/cxgb4: Fix potential null-ptr-deref in pass_establish()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

RDMA/cxgb4: Fix potential null-ptr-deref in pass_establish()

If get_ep_from_tid() fails to lookup non-NULL value for ep, ep is
dereferenced later regardless of whether it is empty.
This patch adds a simple sanity check to fix the issue.

Found by Linux Verification Center (linuxtesting.org) with SVACE.

The Linux kernel CVE team has assigned CVE-2023-53335 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.7 with commit 944661dd97f4f257cd914fffec7eb80832ff9141 and fixed in 5.15.99 with commit 9dca64042d855a24b0bd81ce242e5dc7e939f6eb
	Issue introduced in 4.7 with commit 944661dd97f4f257cd914fffec7eb80832ff9141 and fixed in 6.1.16 with commit 2cfc00e974d75a3aa8155f2660f57d342e1f67ca
	Issue introduced in 4.7 with commit 944661dd97f4f257cd914fffec7eb80832ff9141 and fixed in 6.2.3 with commit 9ddc77eefb2a567b705c3c86ab2ddabe43cadf1b
	Issue introduced in 4.7 with commit 944661dd97f4f257cd914fffec7eb80832ff9141 and fixed in 6.3 with commit 283861a4c52c1ea4df3dd1b6fc75a50796ce3524

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53335
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/infiniband/hw/cxgb4/cm.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/9dca64042d855a24b0bd81ce242e5dc7e939f6eb
	https://git.kernel.org/stable/c/2cfc00e974d75a3aa8155f2660f57d342e1f67ca
	https://git.kernel.org/stable/c/9ddc77eefb2a567b705c3c86ab2ddabe43cadf1b
	https://git.kernel.org/stable/c/283861a4c52c1ea4df3dd1b6fc75a50796ce3524
