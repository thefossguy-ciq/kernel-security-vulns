From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-54005: binder: fix memory leak in binder_init()
Message-Id: <2025122428-CVE-2023-54005-d9ae@gregkh>
Content-Length: 3359
Lines: 64
X-Developer-Signature: v=1; a=openpgp-sha256; l=3424;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=NABXoPKBTQ1RlP26CYmbquVy2WVkJjoh50+3dgsAfFo=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDJnex+7MEto49978sPcvFu0z2Lm/ufpkVMZ2qYNBMdJKt
 +y6rrUYdcSyMAgyMciKKbJ82cZzdH/FIUUvQ9vTMHNYmUCGMHBxCsBEGnIY5ieVHXh3m/2LW2Rv
 xsWzT04vypmyso9hQXu5ZPrC7Inl3kuuhTMbBKfkiO4UAQA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

binder: fix memory leak in binder_init()

In binder_init(), the destruction of binder_alloc_shrinker_init() is not
performed in the wrong path, which will cause memory leaks. So this commit
introduces binder_alloc_shrinker_exit() and calls it in the wrong path to
fix that.

The Linux kernel CVE team has assigned CVE-2023-54005 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.14 with commit f2517eb76f1f2f7f89761f9db2b202e89931738c and fixed in 4.14.324 with commit 486dd742ba186ea333664c517d6775b06b1448ca
	Issue introduced in 4.14 with commit f2517eb76f1f2f7f89761f9db2b202e89931738c and fixed in 4.19.292 with commit ceb0f8cc987fb3d25c06b9662e08a42f99651207
	Issue introduced in 4.14 with commit f2517eb76f1f2f7f89761f9db2b202e89931738c and fixed in 5.4.254 with commit b97dad01c12169991f895de3d4f61b8115d12bab
	Issue introduced in 4.14 with commit f2517eb76f1f2f7f89761f9db2b202e89931738c and fixed in 5.10.191 with commit d7e5e2b87f5d27469075b6326b6b358e38cd9dcb
	Issue introduced in 4.14 with commit f2517eb76f1f2f7f89761f9db2b202e89931738c and fixed in 5.15.127 with commit 03eebad96233397f951d8e9fafd82a1674a77284
	Issue introduced in 4.14 with commit f2517eb76f1f2f7f89761f9db2b202e89931738c and fixed in 6.1.46 with commit f11a26633eb6d3bb24a10b1bacc4e4a9b0c6389f
	Issue introduced in 4.14 with commit f2517eb76f1f2f7f89761f9db2b202e89931738c and fixed in 6.4.11 with commit ee95051c0c1928051f86198bf5e554277a53b26b
	Issue introduced in 4.14 with commit f2517eb76f1f2f7f89761f9db2b202e89931738c and fixed in 6.5 with commit adb9743d6a08778b78d62d16b4230346d3508986

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-54005
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/android/binder.c
	drivers/android/binder_alloc.c
	drivers/android/binder_alloc.h


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/486dd742ba186ea333664c517d6775b06b1448ca
	https://git.kernel.org/stable/c/ceb0f8cc987fb3d25c06b9662e08a42f99651207
	https://git.kernel.org/stable/c/b97dad01c12169991f895de3d4f61b8115d12bab
	https://git.kernel.org/stable/c/d7e5e2b87f5d27469075b6326b6b358e38cd9dcb
	https://git.kernel.org/stable/c/03eebad96233397f951d8e9fafd82a1674a77284
	https://git.kernel.org/stable/c/f11a26633eb6d3bb24a10b1bacc4e4a9b0c6389f
	https://git.kernel.org/stable/c/ee95051c0c1928051f86198bf5e554277a53b26b
	https://git.kernel.org/stable/c/adb9743d6a08778b78d62d16b4230346d3508986
