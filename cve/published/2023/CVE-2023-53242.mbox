From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53242: thermal/drivers/hisi: Drop second sensor hi3660
Message-Id: <2025091516-CVE-2023-53242-b7c5@gregkh>
Content-Length: 2950
Lines: 61
X-Developer-Signature: v=1; a=openpgp-sha256; l=3012;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=05BhAYxAsPmnLfdEK8gEfYBF44AWwa6lBw35qc9Mn7s=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBknFO54zdvxO6gqJjr9m0z5X5UFE+rPS/YZPy42PHfZY
 6FEzr7FHbEsDIJMDLJiiixftvEc3V9xSNHL0PY0zBxWJpAhDFycAjCRjJ0Mc7hFq59dEDHcEvl4
 VsGZyYbnra2N5zAs2KFUe+RCzot2+ZZlso5HOY7lB3SUAQA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

thermal/drivers/hisi: Drop second sensor hi3660

The commit 74c8e6bffbe1 ("driver core: Add __alloc_size hint to devm
allocators") exposes a panic "BRK handler: Fatal exception" on the
hi3660_thermal_probe funciton.
This is because the function allocates memory for only one
sensors array entry, but tries to fill up a second one.

Fix this by removing the unneeded second access.

The Linux kernel CVE team has assigned CVE-2023-53242 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.20 with commit 7d3a2a2bbadb4bf5856ed394ba09b8fbb7a80460 and fixed in 5.4.235 with commit 3cf2181e438f43ed24e12424fe36d156cca233b9
	Issue introduced in 4.20 with commit 7d3a2a2bbadb4bf5856ed394ba09b8fbb7a80460 and fixed in 5.10.173 with commit e02bc492883abf751fd1a8d89fc025fbce6744c6
	Issue introduced in 4.20 with commit 7d3a2a2bbadb4bf5856ed394ba09b8fbb7a80460 and fixed in 5.15.99 with commit f5aaf140ab1c02889c088e1b1098adad600541af
	Issue introduced in 4.20 with commit 7d3a2a2bbadb4bf5856ed394ba09b8fbb7a80460 and fixed in 6.1.16 with commit 9f6756cd09889c7201ee31e6f76fbd914fb0b80d
	Issue introduced in 4.20 with commit 7d3a2a2bbadb4bf5856ed394ba09b8fbb7a80460 and fixed in 6.2.3 with commit 68e675a9b69cfc34dd915d91a4650e3ee53421f4
	Issue introduced in 4.20 with commit 7d3a2a2bbadb4bf5856ed394ba09b8fbb7a80460 and fixed in 6.3 with commit 15cc25829a97c3957e520e971868aacc84341317

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53242
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/thermal/hisi_thermal.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/3cf2181e438f43ed24e12424fe36d156cca233b9
	https://git.kernel.org/stable/c/e02bc492883abf751fd1a8d89fc025fbce6744c6
	https://git.kernel.org/stable/c/f5aaf140ab1c02889c088e1b1098adad600541af
	https://git.kernel.org/stable/c/9f6756cd09889c7201ee31e6f76fbd914fb0b80d
	https://git.kernel.org/stable/c/68e675a9b69cfc34dd915d91a4650e3ee53421f4
	https://git.kernel.org/stable/c/15cc25829a97c3957e520e971868aacc84341317
