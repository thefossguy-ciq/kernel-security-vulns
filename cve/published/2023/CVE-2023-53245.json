{
   "containers": {
      "cna": {
         "providerMetadata": {
            "orgId": "f4215fc3-5b6b-47ff-a258-f7189bd81038"
         },
         "descriptions": [
            {
               "lang": "en",
               "value": "In the Linux kernel, the following vulnerability has been resolved:\n\nscsi: storvsc: Fix handling of virtual Fibre Channel timeouts\n\nHyper-V provides the ability to connect Fibre Channel LUNs to the host\nsystem and present them in a guest VM as a SCSI device. I/O to the vFC\ndevice is handled by the storvsc driver. The storvsc driver includes a\npartial integration with the FC transport implemented in the generic\nportion of the Linux SCSI subsystem so that FC attributes can be displayed\nin /sys.  However, the partial integration means that some aspects of vFC\ndon't work properly. Unfortunately, a full and correct integration isn't\npractical because of limitations in what Hyper-V provides to the guest.\n\nIn particular, in the context of Hyper-V storvsc, the FC transport timeout\nfunction fc_eh_timed_out() causes a kernel panic because it can't find the\nrport and dereferences a NULL pointer. The original patch that added the\ncall from storvsc_eh_timed_out() to fc_eh_timed_out() is faulty in this\nregard.\n\nIn many cases a timeout is due to a transient condition, so the situation\ncan be improved by just continuing to wait like with other I/O requests\nissued by storvsc, and avoiding the guaranteed panic. For a permanent\nfailure, continuing to wait may result in a hung thread instead of a panic,\nwhich again may be better.\n\nSo fix the panic by removing the storvsc call to fc_eh_timed_out().  This\nallows storvsc to keep waiting for a response.  The change has been tested\nby users who experienced a panic in fc_eh_timed_out() due to transient\ntimeouts, and it solves their problem.\n\nIn the future we may want to deprecate the vFC functionality in storvsc\nsince it can't be fully fixed. But it has current users for whom it is\nworking well enough, so it should probably stay for a while longer."
            }
         ],
         "affected": [
            {
               "product": "Linux",
               "vendor": "Linux",
               "defaultStatus": "unaffected",
               "repo": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git",
               "programFiles": [
                  "drivers/scsi/storvsc_drv.c"
               ],
               "versions": [
                  {
                     "version": "3930d7309807ba0bfa460dfa9ed68d5560347dd2",
                     "lessThan": "cd87f4df9865a53807001ed12c0f0420b14ececd",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "3930d7309807ba0bfa460dfa9ed68d5560347dd2",
                     "lessThan": "311db605e07f0d4fc0cc7ddb74f1e5692ea2f469",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "3930d7309807ba0bfa460dfa9ed68d5560347dd2",
                     "lessThan": "048ebc9a28fb918ee635dd4b2fcf4248eb6e4050",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "3930d7309807ba0bfa460dfa9ed68d5560347dd2",
                     "lessThan": "1678408d08f31a694d5150a56796dd04c9710b22",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "3930d7309807ba0bfa460dfa9ed68d5560347dd2",
                     "lessThan": "7a792b3d888aab2c65389f9f4f9f2f6c000b1a0d",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "3930d7309807ba0bfa460dfa9ed68d5560347dd2",
                     "lessThan": "ed70fa5629a8b992a5372d7044d1db1f8fa6de29",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "3930d7309807ba0bfa460dfa9ed68d5560347dd2",
                     "lessThan": "763c06565055ae373fe7f89c11e1447bd1ded264",
                     "status": "affected",
                     "versionType": "git"
                  },
                  {
                     "version": "3930d7309807ba0bfa460dfa9ed68d5560347dd2",
                     "lessThan": "175544ad48cbf56affeef2a679c6a4d4fb1e2881",
                     "status": "affected",
                     "versionType": "git"
                  }
               ]
            },
            {
               "product": "Linux",
               "vendor": "Linux",
               "defaultStatus": "affected",
               "repo": "https://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git",
               "programFiles": [
                  "drivers/scsi/storvsc_drv.c"
               ],
               "versions": [
                  {
                     "version": "4.13",
                     "status": "affected"
                  },
                  {
                     "version": "0",
                     "lessThan": "4.13",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "4.14.323",
                     "lessThanOrEqual": "4.14.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "4.19.292",
                     "lessThanOrEqual": "4.19.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "5.4.254",
                     "lessThanOrEqual": "5.4.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "5.10.191",
                     "lessThanOrEqual": "5.10.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "5.15.127",
                     "lessThanOrEqual": "5.15.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "6.1.46",
                     "lessThanOrEqual": "6.1.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "6.4.11",
                     "lessThanOrEqual": "6.4.*",
                     "status": "unaffected",
                     "versionType": "semver"
                  },
                  {
                     "version": "6.5",
                     "lessThanOrEqual": "*",
                     "status": "unaffected",
                     "versionType": "original_commit_for_fix"
                  }
               ]
            }
         ],
         "cpeApplicability": [
            {
               "nodes": [
                  {
                     "operator": "OR",
                     "negate": false,
                     "cpeMatch": [
                        {
                           "vulnerable": true,
                           "criteria": "cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*",
                           "versionStartIncluding": "4.13",
                           "versionEndExcluding": "4.14.323"
                        },
                        {
                           "vulnerable": true,
                           "criteria": "cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*",
                           "versionStartIncluding": "4.13",
                           "versionEndExcluding": "4.19.292"
                        },
                        {
                           "vulnerable": true,
                           "criteria": "cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*",
                           "versionStartIncluding": "4.13",
                           "versionEndExcluding": "5.4.254"
                        },
                        {
                           "vulnerable": true,
                           "criteria": "cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*",
                           "versionStartIncluding": "4.13",
                           "versionEndExcluding": "5.10.191"
                        },
                        {
                           "vulnerable": true,
                           "criteria": "cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*",
                           "versionStartIncluding": "4.13",
                           "versionEndExcluding": "5.15.127"
                        },
                        {
                           "vulnerable": true,
                           "criteria": "cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*",
                           "versionStartIncluding": "4.13",
                           "versionEndExcluding": "6.1.46"
                        },
                        {
                           "vulnerable": true,
                           "criteria": "cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*",
                           "versionStartIncluding": "4.13",
                           "versionEndExcluding": "6.4.11"
                        },
                        {
                           "vulnerable": true,
                           "criteria": "cpe:2.3:o:linux:linux_kernel:*:*:*:*:*:*:*:*",
                           "versionStartIncluding": "4.13",
                           "versionEndExcluding": "6.5"
                        }
                     ]
                  }
               ]
            }
         ],
         "references": [
            {
               "url": "https://git.kernel.org/stable/c/cd87f4df9865a53807001ed12c0f0420b14ececd"
            },
            {
               "url": "https://git.kernel.org/stable/c/311db605e07f0d4fc0cc7ddb74f1e5692ea2f469"
            },
            {
               "url": "https://git.kernel.org/stable/c/048ebc9a28fb918ee635dd4b2fcf4248eb6e4050"
            },
            {
               "url": "https://git.kernel.org/stable/c/1678408d08f31a694d5150a56796dd04c9710b22"
            },
            {
               "url": "https://git.kernel.org/stable/c/7a792b3d888aab2c65389f9f4f9f2f6c000b1a0d"
            },
            {
               "url": "https://git.kernel.org/stable/c/ed70fa5629a8b992a5372d7044d1db1f8fa6de29"
            },
            {
               "url": "https://git.kernel.org/stable/c/763c06565055ae373fe7f89c11e1447bd1ded264"
            },
            {
               "url": "https://git.kernel.org/stable/c/175544ad48cbf56affeef2a679c6a4d4fb1e2881"
            }
         ],
         "title": "scsi: storvsc: Fix handling of virtual Fibre Channel timeouts",
         "x_generator": {
            "engine": "bippy-1.2.0"
         }
      }
   },
   "cveMetadata": {
      "assignerOrgId": "f4215fc3-5b6b-47ff-a258-f7189bd81038",
      "cveID": "CVE-2023-53245",
      "requesterUserId": "gregkh@kernel.org",
      "serial": "1",
      "state": "PUBLISHED"
   },
   "dataType": "CVE_RECORD",
   "dataVersion": "5.0"
}
