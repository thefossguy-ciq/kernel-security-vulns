From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53990: SMB3: Add missing locks to protect deferred close file list

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

SMB3: Add missing locks to protect deferred close file list

cifs_del_deferred_close function has a critical section which modifies
the deferred close file list. We must acquire deferred_lock before
calling cifs_del_deferred_close function.

The Linux kernel CVE team has assigned CVE-2023-53990 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.15.63 with commit 860efae127888ae535bc4eda1b7f27642727c69e and fixed in 5.15.111 with commit 0f87e18203bd30f71eb1a65259e28e291b6cc43a
	Issue introduced in 6.0 with commit ca08d0eac020d48a3141dbec0a3cf64fbdb17cde and fixed in 6.1.28 with commit 3aa9d065b0685b4e6052f3f2a2462966fdc44fd2
	Issue introduced in 6.0 with commit ca08d0eac020d48a3141dbec0a3cf64fbdb17cde and fixed in 6.2.15 with commit cb36365dac25d546ca4af0eb22acb43c9b4ddfdf
	Issue introduced in 6.0 with commit ca08d0eac020d48a3141dbec0a3cf64fbdb17cde and fixed in 6.3.2 with commit 32a046ccaeea6c19965c04a4c521e703f6607924
	Issue introduced in 6.0 with commit ca08d0eac020d48a3141dbec0a3cf64fbdb17cde and fixed in 6.4 with commit ab9ddc87a9055c4bebd6524d5d761d605d52e557
	Issue introduced in 5.19.4 with commit 60b6d38add7b9c17d6e5d49ee8e930ea1a5650c5

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53990
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	fs/cifs/misc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/0f87e18203bd30f71eb1a65259e28e291b6cc43a
	https://git.kernel.org/stable/c/3aa9d065b0685b4e6052f3f2a2462966fdc44fd2
	https://git.kernel.org/stable/c/cb36365dac25d546ca4af0eb22acb43c9b4ddfdf
	https://git.kernel.org/stable/c/32a046ccaeea6c19965c04a4c521e703f6607924
	https://git.kernel.org/stable/c/ab9ddc87a9055c4bebd6524d5d761d605d52e557
