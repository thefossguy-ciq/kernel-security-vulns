From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53264: clk: imx: clk-imxrt1050: fix memory leak in imxrt1050_clocks_probe

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

clk: imx: clk-imxrt1050: fix memory leak in imxrt1050_clocks_probe

Use devm_of_iomap() instead of of_iomap() to automatically
handle the unused ioremap region. If any error occurs, regions allocated by
kzalloc() will leak, but using devm_kzalloc() instead will automatically
free the memory using devm_kfree().

Also, fix error handling of hws by adding unregister_hws label, which
unregisters remaining hws when iomap failed.

The Linux kernel CVE team has assigned CVE-2023-53264 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.18 with commit 7154b046d8f3a441474ced1688eb348d42f5f165 and fixed in 6.1.39 with commit 1839032251a66f2ae5a043c495532830a55d28c4
	Issue introduced in 5.18 with commit 7154b046d8f3a441474ced1688eb348d42f5f165 and fixed in 6.3.13 with commit 0fbdfd2542252e4c02e8158a06b7c0c9cfd40f99
	Issue introduced in 5.18 with commit 7154b046d8f3a441474ced1688eb348d42f5f165 and fixed in 6.4.4 with commit 02e54db221bb001b32f839e0149ee8d890ab9aa1
	Issue introduced in 5.18 with commit 7154b046d8f3a441474ced1688eb348d42f5f165 and fixed in 6.5 with commit 1b280598ab3bd8a2dc8b96a12530d5b1ee7a8f4a

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53264
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/clk/imx/clk-imxrt1050.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/1839032251a66f2ae5a043c495532830a55d28c4
	https://git.kernel.org/stable/c/0fbdfd2542252e4c02e8158a06b7c0c9cfd40f99
	https://git.kernel.org/stable/c/02e54db221bb001b32f839e0149ee8d890ab9aa1
	https://git.kernel.org/stable/c/1b280598ab3bd8a2dc8b96a12530d5b1ee7a8f4a
