From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53450: ext4: remove a BUG_ON in ext4_mb_release_group_pa()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

ext4: remove a BUG_ON in ext4_mb_release_group_pa()

If a malicious fuzzer overwrites the ext4 superblock while it is
mounted such that the s_first_data_block is set to a very large
number, the calculation of the block group can underflow, and trigger
a BUG_ON check.  Change this to be an ext4_warning so that we don't
crash the kernel.

The Linux kernel CVE team has assigned CVE-2023-53450 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 4.14.315 with commit d5bf8f7fb3ee3d99d1303ceb54599ea0599a4a5b
	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 4.19.283 with commit ef16d8a1798db1a1604ac44ca1bd73ec6bebf483
	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 5.4.243 with commit 185062a21976fbc38f2efd296951b02c4500cf65
	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 5.10.180 with commit b0fc279de4bf17e1710bb7e83906538ff8f11111
	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 5.15.112 with commit 978e5e9111af18741449b81fefd531a622dd969a
	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 6.1.29 with commit d87a4e4094c9879fc8acdff8ce59fdffa979c8e0
	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 6.2.16 with commit bf2a16eb4e6d06124bd8436d4546f61539a65f29
	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 6.3.3 with commit 53c14e7cc2257191ba15425c15638fc4f8abb92b
	Issue introduced in 2.6.25 with commit c9de560ded61faa5b754137b7753da252391c55a and fixed in 6.4 with commit 463808f237cf73e98a1a45ff7460c2406a150a0b

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53450
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	fs/ext4/mballoc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/d5bf8f7fb3ee3d99d1303ceb54599ea0599a4a5b
	https://git.kernel.org/stable/c/ef16d8a1798db1a1604ac44ca1bd73ec6bebf483
	https://git.kernel.org/stable/c/185062a21976fbc38f2efd296951b02c4500cf65
	https://git.kernel.org/stable/c/b0fc279de4bf17e1710bb7e83906538ff8f11111
	https://git.kernel.org/stable/c/978e5e9111af18741449b81fefd531a622dd969a
	https://git.kernel.org/stable/c/d87a4e4094c9879fc8acdff8ce59fdffa979c8e0
	https://git.kernel.org/stable/c/bf2a16eb4e6d06124bd8436d4546f61539a65f29
	https://git.kernel.org/stable/c/53c14e7cc2257191ba15425c15638fc4f8abb92b
	https://git.kernel.org/stable/c/463808f237cf73e98a1a45ff7460c2406a150a0b
