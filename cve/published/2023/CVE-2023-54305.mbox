From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-54305: ext4: refuse to create ea block when umounted

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

ext4: refuse to create ea block when umounted

The ea block expansion need to access s_root while it is
already set as NULL when umount is triggered. Refuse this
request to avoid panic.

The Linux kernel CVE team has assigned CVE-2023-54305 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.13 with commit e50e5129f384ae282adebfb561189cdb19b81cee and fixed in 4.14.308 with commit aedea161d031502a423ed1c7597754681a4f8cda
	Issue introduced in 4.13 with commit e50e5129f384ae282adebfb561189cdb19b81cee and fixed in 4.19.276 with commit 21f6a80d9234422e2eb445734b22c78fc5bf6719
	Issue introduced in 4.13 with commit e50e5129f384ae282adebfb561189cdb19b81cee and fixed in 5.4.235 with commit a92b67e768bde433b9385cde56c09deb58db269e
	Issue introduced in 4.13 with commit e50e5129f384ae282adebfb561189cdb19b81cee and fixed in 5.10.173 with commit 0dc0fa313bb4e86382a3e7125429710d44383196
	Issue introduced in 4.13 with commit e50e5129f384ae282adebfb561189cdb19b81cee and fixed in 5.15.99 with commit 116008ada3d0de4991099edaf6b8c2e9cd6f225a
	Issue introduced in 4.13 with commit e50e5129f384ae282adebfb561189cdb19b81cee and fixed in 6.1.16 with commit 05cbf6ddd9847c7b4f0662c048f195b09405a9d0
	Issue introduced in 4.13 with commit e50e5129f384ae282adebfb561189cdb19b81cee and fixed in 6.2.3 with commit a458a8c1d1fc4e10a1813786132b09a3863ad3f2
	Issue introduced in 4.13 with commit e50e5129f384ae282adebfb561189cdb19b81cee and fixed in 6.3 with commit f31173c19901a96bb2ebf6bcfec8a08df7095c91

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-54305
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	fs/ext4/xattr.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/aedea161d031502a423ed1c7597754681a4f8cda
	https://git.kernel.org/stable/c/21f6a80d9234422e2eb445734b22c78fc5bf6719
	https://git.kernel.org/stable/c/a92b67e768bde433b9385cde56c09deb58db269e
	https://git.kernel.org/stable/c/0dc0fa313bb4e86382a3e7125429710d44383196
	https://git.kernel.org/stable/c/116008ada3d0de4991099edaf6b8c2e9cd6f225a
	https://git.kernel.org/stable/c/05cbf6ddd9847c7b4f0662c048f195b09405a9d0
	https://git.kernel.org/stable/c/a458a8c1d1fc4e10a1813786132b09a3863ad3f2
	https://git.kernel.org/stable/c/f31173c19901a96bb2ebf6bcfec8a08df7095c91
