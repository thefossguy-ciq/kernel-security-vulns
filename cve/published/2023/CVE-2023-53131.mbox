From bippy-1.1.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-53131: SUNRPC: Fix a server shutdown leak
Message-Id: <2025050234-CVE-2023-53131-b288@gregkh>
Content-Length: 2583
Lines: 55
X-Developer-Signature: v=1; a=openpgp-sha256; l=2639;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=DDu/1bmlt4JE8PlWEDQvbxb2YcNdW2iQ/Wqqd5cZBIs=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBkir76v1W0MkI16XyfXyGm1wGrLFBHVhfkzHFgk7+Vvd
 smafuJlRywLgyATg6yYIsuXbTxH91ccUvQytD0NM4eVCWQIAxenAEzk7juGucKGj58n7qpVc/ou
 +vVkK/sVa9uv1xgW7NjwsHqu4qa/5xNSS83y+ETvP2N5CQA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

SUNRPC: Fix a server shutdown leak

Fix a race where kthread_stop() may prevent the threadfn from ever getting
called.  If that happens the svc_rqst will not be cleaned up.

The Linux kernel CVE team has assigned CVE-2023-53131 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.12 with commit ed6473ddc704a2005b9900ca08e236ebb2d8540a and fixed in 5.10.175 with commit ce7dd61e004002bc1c48d1ca47c887f3f3cc7370
	Issue introduced in 4.12 with commit ed6473ddc704a2005b9900ca08e236ebb2d8540a and fixed in 5.15.103 with commit ad7e40ee157ba33950a4ccdc284334580da3638d
	Issue introduced in 4.12 with commit ed6473ddc704a2005b9900ca08e236ebb2d8540a and fixed in 6.1.20 with commit 7a3720361068ab520aed4608bad31ea9a6cc7fe7
	Issue introduced in 4.12 with commit ed6473ddc704a2005b9900ca08e236ebb2d8540a and fixed in 6.2.7 with commit f74b3286859463cd63cc9d4aeaabd8b0c640182a
	Issue introduced in 4.12 with commit ed6473ddc704a2005b9900ca08e236ebb2d8540a and fixed in 6.3 with commit 9ca6705d9d609441d34f8b853e1e4a6369b3b171
	Issue introduced in 4.9.52 with commit f609266b12d214437cf9d68245dc27f8d4f69836

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-53131
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	net/sunrpc/svc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/ce7dd61e004002bc1c48d1ca47c887f3f3cc7370
	https://git.kernel.org/stable/c/ad7e40ee157ba33950a4ccdc284334580da3638d
	https://git.kernel.org/stable/c/7a3720361068ab520aed4608bad31ea9a6cc7fe7
	https://git.kernel.org/stable/c/f74b3286859463cd63cc9d4aeaabd8b0c640182a
	https://git.kernel.org/stable/c/9ca6705d9d609441d34f8b853e1e4a6369b3b171
