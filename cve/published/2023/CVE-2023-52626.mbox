From bippy-b4257b672505 Mon Sep 17 00:00:00 2001
From: Lee Jones <lee@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2023-52626: net/mlx5e: Fix operation precedence bug in port timestamping napi_poll context
X-Developer-Signature: v=1; a=openpgp-sha256; l=2184; i=lee@kernel.org;
 h=from:subject; bh=MMZDgBQxa8xh+CyibRdwYNFd1lUsJPJFapIICmO9hRE=;
 b=owEBbQKS/ZANAwAKAVGvii+H/HdhAcsmYgBmAwrQIZpd6+FBTztk8rmeXMdy5PHA6TdR5LmUH
 QgavwABhSOJAjMEAAEKAB0WIQR2tsk1o74gmpTwh0hRr4ovh/x3YQUCZgMK0AAKCRBRr4ovh/x3
 YZVDD/99fU+Dx1GUrvE5igbHbp47mdaCLPHTnYl6IMPwkgIwFbnP9U5FfiXtD+4ZcPSkVamikoe
 fnRCIrdheZiJbF9YNAkIpJ0Qs7ars/shQ/hNFhViU68QYLbypIJX9A7XUGDVkFPM3ADqOIwHJ/L
 bwL8msXF/V+po5wXl8WWsLsN6yRiyRophyvh4JsHlmNbz7WSEpYyby5bGqP8Hh+JtJY1SSqMKZp
 Lwd4pmNrqr5Xll+NIP47TGBUUAZ7hYarwkxw5bDWk6JT8uXZSFrDWI0NFX05F+pIR4cMLYUsJ8Y
 JdUAp/Bgwyb89TK548pqLLUMoUS/5VlgzjtEKDiMaMAbJxZckondYD3J4uO0+wKCRn48P/BIeUg
 Bwrdh4WR7+5FfHGaWXI8DrIFZ5SDhpjpTgAf76/IWUTIOhMAxZxxv8371Qh8+alXBIJqp93dAE6
 bZVVPlRKwYMCTxVTrUqr+LjUXweGqksVE9Ns+jhILg75PhVoLkPe9odSaJy/Ix5SDbsfRYuHu1h
 q1R+Zd+bUcEsLS3kM/jold3Orr424yg5cfCE9lmi+UlEwrizlOLe99/2t0r9wvOqhMhsaP/3N9r
 lVYuV8EHL5BhFtfl4p1j7sq7UljFBJBh9mO7CwCRroz82W2udM93Cd332lUrvnjjD5dd1Zx5jAQ
 PsJKVgzyVgVJW4g==
X-Developer-Key: i=lee@kernel.org; a=openpgp;
 fpr=76B6C935A3BE209A94F0874851AF8A2F87FC7761

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

net/mlx5e: Fix operation precedence bug in port timestamping napi_poll context

Indirection (*) is of lower precedence than postfix increment (++). Logic
in napi_poll context would cause an out-of-bound read by first increment
the pointer address by byte address space and then dereference the value.
Rather, the intended logic was to dereference first and then increment the
underlying value.

The Linux kernel CVE team has assigned CVE-2023-52626 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 6.6.3 with commit e5d30f7da357 and fixed in 6.6.15 with commit 40e0d0746390
	Issue introduced in 6.7 with commit 92214be5979c and fixed in 6.7.3 with commit 33cdeae8c6fb
	Issue introduced in 6.7 with commit 92214be5979c and fixed in 6.8 with commit 3876638b2c7e

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2023-52626
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/net/ethernet/mellanox/mlx5/core/en/ptp.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/40e0d0746390c5b0c31144f4f1688d72f3f8d790
	https://git.kernel.org/stable/c/33cdeae8c6fb58cc445f859b67c014dc9f60b4e0
	https://git.kernel.org/stable/c/3876638b2c7ebb2c9d181de1191db0de8cac143a
