From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50480: memory: pl353-smc: Fix refcount leak bug in pl353_smc_probe()
Message-Id: <2025100439-CVE-2022-50480-f296@gregkh>
Content-Length: 2956
Lines: 61
X-Developer-Signature: v=1; a=openpgp-sha256; l=3018;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=+EcvbwIzAzvM/NDa43cDKK6++jcPnieT5Wo4aJJVvUA=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBkPrcLVVVffPXHOOUOUy72vvYnFsm//mWi/2RMl7F/5f
 O9SfrqvI5aFQZCJQVZMkeXLNp6j+ysOKXoZ2p6GmcPKBDKEgYtTACYi5MAwv7DPeeMykXZF6QdJ
 tqfNm3e3n+r7zzDPYL2ziUvTO6mwiQs/5gv3K7ma/pgAAA==
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

memory: pl353-smc: Fix refcount leak bug in pl353_smc_probe()

The break of for_each_available_child_of_node() needs a
corresponding of_node_put() when the reference 'child' is not
used anymore. Here we do not need to call of_node_put() in
fail path as '!match' means no break.

While the of_platform_device_create() will created a new
reference by 'child' but it has considered the refcounting.

The Linux kernel CVE team has assigned CVE-2022-50480 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.0 with commit fee10bd2267868f2a3e7ba008ef7665aac5e4412 and fixed in 5.4.220 with commit b37f4a711e5d4bf3608ccbc6de82b52e92b441a0
	Issue introduced in 5.0 with commit fee10bd2267868f2a3e7ba008ef7665aac5e4412 and fixed in 5.10.150 with commit fde46754d5483bc398018bbec3c8ef5c55219e67
	Issue introduced in 5.0 with commit fee10bd2267868f2a3e7ba008ef7665aac5e4412 and fixed in 5.15.75 with commit 566b143aa5112a0c2784e20603778518bb799537
	Issue introduced in 5.0 with commit fee10bd2267868f2a3e7ba008ef7665aac5e4412 and fixed in 5.19.17 with commit 44db35ceb94756ba513dcf6b69bf9e949b28469c
	Issue introduced in 5.0 with commit fee10bd2267868f2a3e7ba008ef7665aac5e4412 and fixed in 6.0.3 with commit 49605dc25e7fb33bf8b671279d4468531da90f89
	Issue introduced in 5.0 with commit fee10bd2267868f2a3e7ba008ef7665aac5e4412 and fixed in 6.1 with commit 61b3c876c1cbdb1efd1f52a1f348580e6e14efb6

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50480
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/memory/pl353-smc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/b37f4a711e5d4bf3608ccbc6de82b52e92b441a0
	https://git.kernel.org/stable/c/fde46754d5483bc398018bbec3c8ef5c55219e67
	https://git.kernel.org/stable/c/566b143aa5112a0c2784e20603778518bb799537
	https://git.kernel.org/stable/c/44db35ceb94756ba513dcf6b69bf9e949b28469c
	https://git.kernel.org/stable/c/49605dc25e7fb33bf8b671279d4468531da90f89
	https://git.kernel.org/stable/c/61b3c876c1cbdb1efd1f52a1f348580e6e14efb6
