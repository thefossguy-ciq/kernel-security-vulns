From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50196: soc: qcom: ocmem: Fix refcount leak in of_get_ocmem
Message-Id: <2025061838-CVE-2022-50196-4ce9@gregkh>
Content-Length: 2601
Lines: 56
X-Developer-Signature: v=1; a=openpgp-sha256; l=2658;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=I04PqrTo+GoH6+LamxR2jLaCfTVK7wR/WJ64BIMe1NE=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBlBcyZ9dzgq3hobOPvq+vBMn8+f6358uBvSlrxRNUo39
 9Wtcx61HbEsDIJMDLJiiixftvEc3V9xSNHL0PY0zBxWJpAhDFycAjCRFekMC3p9t8QeC9O6s06z
 tGeasaNk2TM1T4YFl1fIhd7J+PFR4fj9176lH+2+L3lvAAA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

soc: qcom: ocmem: Fix refcount leak in of_get_ocmem

of_parse_phandle() returns a node pointer with refcount
incremented, we should use of_node_put() on it when not need anymore.
Add missing of_node_put() to avoid refcount leak.
of_node_put() will check NULL pointer.

The Linux kernel CVE team has assigned CVE-2022-50196 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.5 with commit 88c1e9404f1deee02e52d13aae3d9ee2cabd66f5 and fixed in 5.10.137 with commit 07aea6819d569d1e172227486655e4fb5bd4cdb9
	Issue introduced in 5.5 with commit 88c1e9404f1deee02e52d13aae3d9ee2cabd66f5 and fixed in 5.15.61 with commit 84a928b44cb303d5756e3bff2734921de8dce4f6
	Issue introduced in 5.5 with commit 88c1e9404f1deee02e52d13aae3d9ee2cabd66f5 and fixed in 5.18.18 with commit a1e4243c0dddeafb4ace6d9906d3f5129b81a9fe
	Issue introduced in 5.5 with commit 88c1e9404f1deee02e52d13aae3d9ee2cabd66f5 and fixed in 5.19.2 with commit ed40a48d0a9166edb22e2b8efafea822e93dd79a
	Issue introduced in 5.5 with commit 88c1e9404f1deee02e52d13aae3d9ee2cabd66f5 and fixed in 6.0 with commit 92a563fcf14b3093226fb36f12e9b5cf630c5a5d

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50196
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/soc/qcom/ocmem.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/07aea6819d569d1e172227486655e4fb5bd4cdb9
	https://git.kernel.org/stable/c/84a928b44cb303d5756e3bff2734921de8dce4f6
	https://git.kernel.org/stable/c/a1e4243c0dddeafb4ace6d9906d3f5129b81a9fe
	https://git.kernel.org/stable/c/ed40a48d0a9166edb22e2b8efafea822e93dd79a
	https://git.kernel.org/stable/c/92a563fcf14b3093226fb36f12e9b5cf630c5a5d
