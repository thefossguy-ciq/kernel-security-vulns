From bippy-1.1.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49821: mISDN: fix possible memory leak in mISDN_dsp_element_register()
Message-Id: <2025050133-CVE-2022-49821-9223@gregkh>
Content-Length: 3529
Lines: 66
X-Developer-Signature: v=1; a=openpgp-sha256; l=3596;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=dyCDk2TtRjal9dNcZwH1AAQpTzVTspCibSzmclo6+JA=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBnCDXNP8oS8v/3onu5Tr7XKrvp11bIvanVkb96zlV7Po
 dXy5enSjlgWBkEmBlkxRZYv23iO7q84pOhlaHsaZg4rE8gQBi5OAZhIw1KG+ZkbN21bvjCpMN4p
 irk0csWbEJbWlwwLJp1eYWTrHzN1QenRIxeny5yZv+kGLwA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

mISDN: fix possible memory leak in mISDN_dsp_element_register()

Afer commit 1fa5ae857bb1 ("driver core: get rid of struct device's
bus_id string array"), the name of device is allocated dynamically,
use put_device() to give up the reference, so that the name can be
freed in kobject_cleanup() when the refcount is 0.

The 'entry' is going to be freed in mISDN_dsp_dev_release(), so the
kfree() is removed. list_del() is called in mISDN_dsp_dev_release(),
so it need be initialized.

The Linux kernel CVE team has assigned CVE-2022-49821 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 4.9.334 with commit bbd53d05c4c892080ef3b617eff4f57903acecb9
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 4.14.300 with commit b119bedbefb7dd9ed8bf8cb9f1056504250d610e
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 4.19.267 with commit 727ed7d28348c026c7ef4d852f3d0e5054d376e8
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 5.4.225 with commit 0f2c681900a01e3f23789bca26d88268c3d5b51d
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 5.10.156 with commit 083a2c9ef82e184bdf0b9f9a1e5fc38d32afbb47
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 5.15.80 with commit 7a05e3929668c8cfef495c69752a9e91fac4878f
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 6.0.10 with commit d4b8394725079670be309f9a35ad88a8cbbaaefd
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 6.1 with commit 98a2ac1ca8fd6eca6867726fe238d06e75eb1acd

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49821
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/isdn/mISDN/dsp_pipeline.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/bbd53d05c4c892080ef3b617eff4f57903acecb9
	https://git.kernel.org/stable/c/b119bedbefb7dd9ed8bf8cb9f1056504250d610e
	https://git.kernel.org/stable/c/727ed7d28348c026c7ef4d852f3d0e5054d376e8
	https://git.kernel.org/stable/c/0f2c681900a01e3f23789bca26d88268c3d5b51d
	https://git.kernel.org/stable/c/083a2c9ef82e184bdf0b9f9a1e5fc38d32afbb47
	https://git.kernel.org/stable/c/7a05e3929668c8cfef495c69752a9e91fac4878f
	https://git.kernel.org/stable/c/d4b8394725079670be309f9a35ad88a8cbbaaefd
	https://git.kernel.org/stable/c/98a2ac1ca8fd6eca6867726fe238d06e75eb1acd
