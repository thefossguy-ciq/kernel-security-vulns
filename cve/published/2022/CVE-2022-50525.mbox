From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50525: iommu/fsl_pamu: Fix resource leak in fsl_pamu_probe()
Message-Id: <2025100705-CVE-2022-50525-e70b@gregkh>
Content-Length: 3457
Lines: 63
X-Developer-Signature: v=1; a=openpgp-sha256; l=3521;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=snnllgJSQIwzzCeDE2RnoZRmeWwruMT01psJn/8V/44=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBlP9bPC5l/0KdW9P93Oyy+ZfdvsDSxNm5mXfzO8KXZ9W
 d9L/4fOHbEsDIJMDLJiiixftvEc3V9xSNHL0PY0zBxWJpAhDFycAjCRabEM811CPy2qbueyPj51
 V+KbNElr4aS3CxgW9NfwCj9IVly46lyXTn2KkvyfI0dnAQA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

iommu/fsl_pamu: Fix resource leak in fsl_pamu_probe()

The fsl_pamu_probe() returns directly when create_csd() failed, leaving
irq and memories unreleased.
Fix by jumping to error if create_csd() returns error.

The Linux kernel CVE team has assigned CVE-2022-50525 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 4.9.337 with commit c93983230562883e0b5f122040efbb3d478c36d4
	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 4.14.303 with commit a305d0e4d0ce3166e31d7dbcb4c98b09cad6d49a
	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 4.19.270 with commit 9fbccdf2fefa3944dd8ba8c6a808b387787f3917
	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 5.4.229 with commit 17fd440594961c5e2ea0f58591bc1bdba0629c75
	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 5.10.163 with commit 0d240ac0e4c35d3f64fc782c11433138c1bd016e
	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 5.15.86 with commit e42b543d08052c3b223bcfb48f05cbaf0b767f86
	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 6.0.16 with commit 9238b687fd62cde14c6e2e8576a40e4246de7ebe
	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 6.1.2 with commit de7eb55009796687fc0a1670e0b944fa8ed54e9b
	Issue introduced in 3.12 with commit 695093e38c3ef63fcb43a2840ed865efa20671d5 and fixed in 6.2 with commit 73f5fc5f884ad0c5f7d57f66303af64f9f002526

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50525
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/iommu/fsl_pamu.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/c93983230562883e0b5f122040efbb3d478c36d4
	https://git.kernel.org/stable/c/a305d0e4d0ce3166e31d7dbcb4c98b09cad6d49a
	https://git.kernel.org/stable/c/9fbccdf2fefa3944dd8ba8c6a808b387787f3917
	https://git.kernel.org/stable/c/17fd440594961c5e2ea0f58591bc1bdba0629c75
	https://git.kernel.org/stable/c/0d240ac0e4c35d3f64fc782c11433138c1bd016e
	https://git.kernel.org/stable/c/e42b543d08052c3b223bcfb48f05cbaf0b767f86
	https://git.kernel.org/stable/c/9238b687fd62cde14c6e2e8576a40e4246de7ebe
	https://git.kernel.org/stable/c/de7eb55009796687fc0a1670e0b944fa8ed54e9b
	https://git.kernel.org/stable/c/73f5fc5f884ad0c5f7d57f66303af64f9f002526
