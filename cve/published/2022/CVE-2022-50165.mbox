From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50165: wifi: wil6210: debugfs: fix uninitialized variable use in `wil_write_file_wmi()`
Message-Id: <2025061827-CVE-2022-50165-1495@gregkh>
Content-Length: 3533
Lines: 68
X-Developer-Signature: v=1; a=openpgp-sha256; l=3602;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=kuDljGYB6+edai1D5eYOitwpDTt6KGDf9j3uRA42U1g=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBlBc9pnv7fteb1p2av3Ys2i4c979jnFn7Xhunh+bUP3F
 flbYq77OmJZGASZGGTFFFm+bOM5ur/ikKKXoe1pmDmsTCBDGLg4BWAi/ZkM8x0c526//FzcMndy
 cfYEzllJ+V1qbAwL1v1g1mWLS1GdWe3hqvvixwFvu1XzAQ==
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

wifi: wil6210: debugfs: fix uninitialized variable use in `wil_write_file_wmi()`

Commit 7a4836560a61 changes simple_write_to_buffer() with memdup_user()
but it forgets to change the value to be returned that came from
simple_write_to_buffer() call. It results in the following warning:

  warning: variable 'rc' is uninitialized when used here [-Wuninitialized]
           return rc;
                  ^~

Remove rc variable and just return the passed in length if the
memdup_user() succeeds.

The Linux kernel CVE team has assigned CVE-2022-50165 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.17 with commit ff974e4083341383d3dd4079e52ed30f57f376f0 and fixed in 4.14.291 with commit b13c84e877d7a3095bacb14665db304b2c00e95f
	Issue introduced in 3.17 with commit ff974e4083341383d3dd4079e52ed30f57f376f0 and fixed in 4.19.256 with commit c9fde3a44da566d8929070ab6bda4f0dfa9955d0
	Issue introduced in 3.17 with commit ff974e4083341383d3dd4079e52ed30f57f376f0 and fixed in 5.4.211 with commit 52b11a48cf073e0aab923ae809a765d756cecf13
	Issue introduced in 3.17 with commit ff974e4083341383d3dd4079e52ed30f57f376f0 and fixed in 5.10.137 with commit 6c5fee83bdbeffe8d607d1ab125122a75f40bd1a
	Issue introduced in 3.17 with commit ff974e4083341383d3dd4079e52ed30f57f376f0 and fixed in 5.15.61 with commit 689e5caf63e99e15d2f485ec297c1bf9243e0e28
	Issue introduced in 3.17 with commit ff974e4083341383d3dd4079e52ed30f57f376f0 and fixed in 5.18.18 with commit d4742c886043b69d2d058bfde3998ef333b66595
	Issue introduced in 3.17 with commit ff974e4083341383d3dd4079e52ed30f57f376f0 and fixed in 5.19.2 with commit 409bd72e544fdf4809ea0dac337bb5a1f11a25a9
	Issue introduced in 3.17 with commit ff974e4083341383d3dd4079e52ed30f57f376f0 and fixed in 6.0 with commit d578e0af3a003736f6c440188b156483d451b329

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50165
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/net/wireless/ath/wil6210/debugfs.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/b13c84e877d7a3095bacb14665db304b2c00e95f
	https://git.kernel.org/stable/c/c9fde3a44da566d8929070ab6bda4f0dfa9955d0
	https://git.kernel.org/stable/c/52b11a48cf073e0aab923ae809a765d756cecf13
	https://git.kernel.org/stable/c/6c5fee83bdbeffe8d607d1ab125122a75f40bd1a
	https://git.kernel.org/stable/c/689e5caf63e99e15d2f485ec297c1bf9243e0e28
	https://git.kernel.org/stable/c/d4742c886043b69d2d058bfde3998ef333b66595
	https://git.kernel.org/stable/c/409bd72e544fdf4809ea0dac337bb5a1f11a25a9
	https://git.kernel.org/stable/c/d578e0af3a003736f6c440188b156483d451b329
