From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49948: vt: Clear selection before changing the font

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

vt: Clear selection before changing the font

When changing the console font with ioctl(KDFONTOP) the new font size
can be bigger than the previous font. A previous selection may thus now
be outside of the new screen size and thus trigger out-of-bounds
accesses to graphics memory if the selection is removed in
vc_do_resize().

Prevent such out-of-memory accesses by dropping the selection before the
various con_font_set() console handlers are called.

The Linux kernel CVE team has assigned CVE-2022-49948 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.9 with commit 009e39ae44f4191188aeb6dfbf661b771dbbe515 and fixed in 4.9.328 with commit c555cf04684fde39b5b0dd9fd80730030ee10c4a
	Issue introduced in 4.9 with commit 009e39ae44f4191188aeb6dfbf661b771dbbe515 and fixed in 4.14.293 with commit e9ba4611ddf676194385506222cce7b0844e708e
	Issue introduced in 4.9 with commit 009e39ae44f4191188aeb6dfbf661b771dbbe515 and fixed in 4.19.258 with commit f74b4a41c5d7c9522469917e3072e55d435efd9e
	Issue introduced in 4.9 with commit 009e39ae44f4191188aeb6dfbf661b771dbbe515 and fixed in 5.4.213 with commit 1cf1930369c9dc428d827b60260c53271bff3285
	Issue introduced in 4.9 with commit 009e39ae44f4191188aeb6dfbf661b771dbbe515 and fixed in 5.10.142 with commit 989201bb8c00b222235aff04e6200230d29dc7bb
	Issue introduced in 4.9 with commit 009e39ae44f4191188aeb6dfbf661b771dbbe515 and fixed in 5.15.66 with commit 2535431ae967ad17585513649625fea7db28d4db
	Issue introduced in 4.9 with commit 009e39ae44f4191188aeb6dfbf661b771dbbe515 and fixed in 5.19.8 with commit c904fe03c4bd1f356a58797d39e2a5d0ca15cefc
	Issue introduced in 4.9 with commit 009e39ae44f4191188aeb6dfbf661b771dbbe515 and fixed in 6.0 with commit 566f9c9f89337792070b5a6062dff448b3e7977f
	Issue introduced in 3.2.85 with commit e60f8fcce05042e8f8cea25ee81fecc1222114cf
	Issue introduced in 3.10.105 with commit 5812a9bc9d68a82c2cc839f88e6f7a05093ab39d
	Issue introduced in 3.12.68 with commit 863ad19fd654c485e3beec3575c4d74a1e74369e
	Issue introduced in 3.16.40 with commit dbc3fd44f957a39407e889287bf61fa0ef3ecc14
	Issue introduced in 3.18.45 with commit 0b2a0a58ad22f9d6dfc641bc5ec46057493f22a5
	Issue introduced in 4.1.36 with commit 9f2d48f0745f921040df91bfe8fa7f0339cd7497
	Issue introduced in 4.4.31 with commit 3425e397fb23cc2e8e6fb8f5b8226dcb447e84dd
	Issue introduced in 4.8.7 with commit eeae0a12a16650ff494d5faefa371cd9e7079575

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49948
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/tty/vt/vt.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/c555cf04684fde39b5b0dd9fd80730030ee10c4a
	https://git.kernel.org/stable/c/e9ba4611ddf676194385506222cce7b0844e708e
	https://git.kernel.org/stable/c/f74b4a41c5d7c9522469917e3072e55d435efd9e
	https://git.kernel.org/stable/c/1cf1930369c9dc428d827b60260c53271bff3285
	https://git.kernel.org/stable/c/989201bb8c00b222235aff04e6200230d29dc7bb
	https://git.kernel.org/stable/c/2535431ae967ad17585513649625fea7db28d4db
	https://git.kernel.org/stable/c/c904fe03c4bd1f356a58797d39e2a5d0ca15cefc
	https://git.kernel.org/stable/c/566f9c9f89337792070b5a6062dff448b3e7977f
