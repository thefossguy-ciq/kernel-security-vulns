From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50710: ice: set tx_tstamps when creating new Tx rings via ethtool

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

ice: set tx_tstamps when creating new Tx rings via ethtool

When the user changes the number of queues via ethtool, the driver
allocates new rings. This allocation did not initialize tx_tstamps. This
results in the tx_tstamps field being zero (due to kcalloc allocation), and
would result in a NULL pointer dereference when attempting a transmit
timestamp on the new ring.

The Linux kernel CVE team has assigned CVE-2022-50710 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.14 with commit ea9b847cda647b9849b0b9fa0447e876a1ac62e1 and fixed in 5.15.75 with commit 624f03a027f2b18647cc4f1a7a81920a1e4e0201
	Issue introduced in 5.14 with commit ea9b847cda647b9849b0b9fa0447e876a1ac62e1 and fixed in 5.19.17 with commit 13180cb88a7be5ee389f65f6ab9f78e46f7722b2
	Issue introduced in 5.14 with commit ea9b847cda647b9849b0b9fa0447e876a1ac62e1 and fixed in 6.0.3 with commit 9eb5fff6b0e78819c758892282da5faa915724d0
	Issue introduced in 5.14 with commit ea9b847cda647b9849b0b9fa0447e876a1ac62e1 and fixed in 6.1 with commit b3b173745c8cab1e24d6821488b60abed3acb24d

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50710
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/net/ethernet/intel/ice/ice_ethtool.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/624f03a027f2b18647cc4f1a7a81920a1e4e0201
	https://git.kernel.org/stable/c/13180cb88a7be5ee389f65f6ab9f78e46f7722b2
	https://git.kernel.org/stable/c/9eb5fff6b0e78819c758892282da5faa915724d0
	https://git.kernel.org/stable/c/b3b173745c8cab1e24d6821488b60abed3acb24d
