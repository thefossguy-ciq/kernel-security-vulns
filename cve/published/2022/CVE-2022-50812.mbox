From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50812: security: Restrict CONFIG_ZERO_CALL_USED_REGS to gcc or clang > 15.0.6

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

security: Restrict CONFIG_ZERO_CALL_USED_REGS to gcc or clang > 15.0.6

A bad bug in clang's implementation of -fzero-call-used-regs can result
in NULL pointer dereferences (see the links above the check for more
information). Restrict CONFIG_CC_HAS_ZERO_CALL_USED_REGS to either a
supported GCC version or a clang newer than 15.0.6, which will catch
both a theoretical 15.0.7 and the upcoming 16.0.0, which will both have
the bug fixed.

The Linux kernel CVE team has assigned CVE-2022-50812 to this issue.


Affected and fixed versions
===========================

	Fixed in 5.15.86 with commit 8a4236456a3a402f6bb92aa7b75e7a3b4ef7a72c
	Fixed in 6.0.16 with commit 0b202dfedb5aa2e7d07d849be33fa3a48c026926
	Fixed in 6.1.2 with commit 21ca0bfa11bbb9a9207f5d2104f47d3d71b4616e
	Fixed in 6.2 with commit d6a9fb87e9d18f3394a9845546bbe868efdccfd2

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50812
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	security/Kconfig.hardening


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/8a4236456a3a402f6bb92aa7b75e7a3b4ef7a72c
	https://git.kernel.org/stable/c/0b202dfedb5aa2e7d07d849be33fa3a48c026926
	https://git.kernel.org/stable/c/21ca0bfa11bbb9a9207f5d2104f47d3d71b4616e
	https://git.kernel.org/stable/c/d6a9fb87e9d18f3394a9845546bbe868efdccfd2
