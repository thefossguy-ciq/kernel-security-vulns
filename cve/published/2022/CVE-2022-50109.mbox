From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50109: video: fbdev: amba-clcd: Fix refcount leak bugs
Message-Id: <2025061807-CVE-2022-50109-9f52@gregkh>
Content-Length: 3370
Lines: 64
X-Developer-Signature: v=1; a=openpgp-sha256; l=3435;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=QWXBSVWszpY2TZGMEUcaTX+QDYS2F4R25cC0GrEpqsE=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBlBc4q3Ff0MTfnAffzpifsV/h8LTTKnBK6RDDCt+1mmy
 sCoeTCwI5aFQZCJQVZMkeXLNp6j+ysOKXoZ2p6GmcPKBDKEgYtTACYypZVhfvY1+76MX4FTDm98
 9q7wT5Vz1dr7jQwLNiYpcZ86lNtdmLPo7jWbf+/Kn8QJAwA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

video: fbdev: amba-clcd: Fix refcount leak bugs

In clcdfb_of_init_display(), we should call of_node_put() for the
references returned by of_graph_get_next_endpoint() and
of_graph_get_remote_port_parent() which have increased the refcount.

Besides, we should call of_node_put() both in fail path or when
the references are not used anymore.

The Linux kernel CVE team has assigned CVE-2022-50109 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.17 with commit d10715be03bd8bad59ddc50236cb140c3bd73c7b and fixed in 4.14.291 with commit 2688df86c02da6bdc9866b62d974e169a2678883
	Issue introduced in 3.17 with commit d10715be03bd8bad59ddc50236cb140c3bd73c7b and fixed in 4.19.256 with commit a97ff8a949dbf41be89f436b2b1a2b3d794493df
	Issue introduced in 3.17 with commit d10715be03bd8bad59ddc50236cb140c3bd73c7b and fixed in 5.4.211 with commit 49a4c1a87ef884e43cdda58b142a2a30f2f09efc
	Issue introduced in 3.17 with commit d10715be03bd8bad59ddc50236cb140c3bd73c7b and fixed in 5.10.137 with commit da276dc288bf838ea0fd778b5441ec0f601c69f7
	Issue introduced in 3.17 with commit d10715be03bd8bad59ddc50236cb140c3bd73c7b and fixed in 5.15.61 with commit 29f06f1905c312671a09ee85ca92ac04a1d9f305
	Issue introduced in 3.17 with commit d10715be03bd8bad59ddc50236cb140c3bd73c7b and fixed in 5.18.18 with commit a51519ebd0fdad3546463018b8f6bc3b0f4d3032
	Issue introduced in 3.17 with commit d10715be03bd8bad59ddc50236cb140c3bd73c7b and fixed in 5.19.2 with commit a88ab277cca99aeb9a3b2b7db358f1a6dd528b0c
	Issue introduced in 3.17 with commit d10715be03bd8bad59ddc50236cb140c3bd73c7b and fixed in 6.0 with commit 26c2b7d9fac42eb8317f3ceefa4c1a9a9170ca69

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50109
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/video/fbdev/amba-clcd.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/2688df86c02da6bdc9866b62d974e169a2678883
	https://git.kernel.org/stable/c/a97ff8a949dbf41be89f436b2b1a2b3d794493df
	https://git.kernel.org/stable/c/49a4c1a87ef884e43cdda58b142a2a30f2f09efc
	https://git.kernel.org/stable/c/da276dc288bf838ea0fd778b5441ec0f601c69f7
	https://git.kernel.org/stable/c/29f06f1905c312671a09ee85ca92ac04a1d9f305
	https://git.kernel.org/stable/c/a51519ebd0fdad3546463018b8f6bc3b0f4d3032
	https://git.kernel.org/stable/c/a88ab277cca99aeb9a3b2b7db358f1a6dd528b0c
	https://git.kernel.org/stable/c/26c2b7d9fac42eb8317f3ceefa4c1a9a9170ca69
