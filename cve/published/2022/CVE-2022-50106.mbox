From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50106: powerpc/cell/axon_msi: Fix refcount leak in setup_msi_msg_address
Message-Id: <2025061806-CVE-2022-50106-33e4@gregkh>
Content-Length: 3314
Lines: 61
X-Developer-Signature: v=1; a=openpgp-sha256; l=3376;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=BVgSk/GR1yZRNmecwQh/1kuDasfsDWRU5AFfzOEOFbI=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBlBc4o073lcEky5vuMaxwf/xSdFv5o4Xzp0NTWh9Xr4u
 s7bDC/+dcSyMAgyMciKKbJ82cZzdH/FIUUvQ9vTMHNYmUCGMHBxCsBEBJ4yzHc+813qfdyUT9e5
 jCfpmmpEcLUo8zPMM7CeuyyGhf36lUOfE/9r9Ww9+6mtGwA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

powerpc/cell/axon_msi: Fix refcount leak in setup_msi_msg_address

of_get_next_parent() returns a node pointer with refcount incremented,
we should use of_node_put() on it when not need anymore.
Add missing of_node_put() in the error path to avoid refcount leak.

The Linux kernel CVE team has assigned CVE-2022-50106 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 2.6.23 with commit ce21b3c9648ae55181787bf25ee00cf91dfd5c91 and fixed in 4.14.291 with commit 6263ec8032c411b8ef6b7f00198cb18c855ee6cb
	Issue introduced in 2.6.23 with commit ce21b3c9648ae55181787bf25ee00cf91dfd5c91 and fixed in 4.19.256 with commit 51cf876b11fb6ca06f69e9d1de58f892d1522e9d
	Issue introduced in 2.6.23 with commit ce21b3c9648ae55181787bf25ee00cf91dfd5c91 and fixed in 5.4.211 with commit f388643657cd5a04dc47a68d85321876c5b4c208
	Issue introduced in 2.6.23 with commit ce21b3c9648ae55181787bf25ee00cf91dfd5c91 and fixed in 5.10.137 with commit 00dc7cbbb558955ff410fd392cc9b0366eb06df0
	Issue introduced in 2.6.23 with commit ce21b3c9648ae55181787bf25ee00cf91dfd5c91 and fixed in 5.15.61 with commit 5eaa93caa63abf382b319dbe2f032232026740c2
	Issue introduced in 2.6.23 with commit ce21b3c9648ae55181787bf25ee00cf91dfd5c91 and fixed in 5.18.18 with commit 02ed44125d7a7238999750ca126b60f8dd7a88b1
	Issue introduced in 2.6.23 with commit ce21b3c9648ae55181787bf25ee00cf91dfd5c91 and fixed in 5.19.2 with commit af41cff4ada533b1cf40de6c468ba164fd32c22d
	Issue introduced in 2.6.23 with commit ce21b3c9648ae55181787bf25ee00cf91dfd5c91 and fixed in 6.0 with commit df5d4b616ee76abc97e5bd348e22659c2b095b1c

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50106
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	arch/powerpc/platforms/cell/axon_msi.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/6263ec8032c411b8ef6b7f00198cb18c855ee6cb
	https://git.kernel.org/stable/c/51cf876b11fb6ca06f69e9d1de58f892d1522e9d
	https://git.kernel.org/stable/c/f388643657cd5a04dc47a68d85321876c5b4c208
	https://git.kernel.org/stable/c/00dc7cbbb558955ff410fd392cc9b0366eb06df0
	https://git.kernel.org/stable/c/5eaa93caa63abf382b319dbe2f032232026740c2
	https://git.kernel.org/stable/c/02ed44125d7a7238999750ca126b60f8dd7a88b1
	https://git.kernel.org/stable/c/af41cff4ada533b1cf40de6c468ba164fd32c22d
	https://git.kernel.org/stable/c/df5d4b616ee76abc97e5bd348e22659c2b095b1c
