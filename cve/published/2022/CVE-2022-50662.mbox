From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50662: RDMA/hns: fix memory leak in hns_roce_alloc_mr()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

RDMA/hns: fix memory leak in hns_roce_alloc_mr()

When hns_roce_mr_enable() failed in hns_roce_alloc_mr(), mr_key is not
released. Compiled test only.

The Linux kernel CVE team has assigned CVE-2022-50662 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.8 with commit 9b2cf76c9f052987ae5c4ad450ebebdc7c5d7b87 and fixed in 5.10.163 with commit 164fa80330a81db67c26d10d071083941d29a510
	Issue introduced in 5.8 with commit 9b2cf76c9f052987ae5c4ad450ebebdc7c5d7b87 and fixed in 5.15.86 with commit 35f9cd060e68ff910e49bf37b1b0d336a311849a
	Issue introduced in 5.8 with commit 9b2cf76c9f052987ae5c4ad450ebebdc7c5d7b87 and fixed in 6.0.16 with commit fd32e378bc1dea0d48767adf2bbb478581bb0a95
	Issue introduced in 5.8 with commit 9b2cf76c9f052987ae5c4ad450ebebdc7c5d7b87 and fixed in 6.1.2 with commit fc2c43bf41c89e7451fe750025ae55eb2e2a741d
	Issue introduced in 5.8 with commit 9b2cf76c9f052987ae5c4ad450ebebdc7c5d7b87 and fixed in 6.2 with commit a115aa00b18f7b8982b8f458149632caf64a862a

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50662
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/infiniband/hw/hns/hns_roce_mr.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/164fa80330a81db67c26d10d071083941d29a510
	https://git.kernel.org/stable/c/35f9cd060e68ff910e49bf37b1b0d336a311849a
	https://git.kernel.org/stable/c/fd32e378bc1dea0d48767adf2bbb478581bb0a95
	https://git.kernel.org/stable/c/fc2c43bf41c89e7451fe750025ae55eb2e2a741d
	https://git.kernel.org/stable/c/a115aa00b18f7b8982b8f458149632caf64a862a
