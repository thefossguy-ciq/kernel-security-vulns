From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50761: x86/xen: Fix memory leak in xen_init_lock_cpu()
Message-Id: <2025122455-CVE-2022-50761-0e67@gregkh>
Content-Length: 3493
Lines: 63
X-Developer-Signature: v=1; a=openpgp-sha256; l=3557;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=esFAENoGyCFlb0OPamb2hipHhZPd28UJM5LjZreQRcY=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDJneT42/c8z+PD0vQ6/wM9seefnbU4O4cnMknxlLCUSKX
 TMTLX3YEcvCIMjEICumyPJlG8/R/RWHFL0MbU/DzGFlAhnCwMUpABP5EcmwYHbnxKmazIYVYfLP
 gr5zmL6R3m63hmEO78I81YRLS612LFX6JPFq6UqZZvfdAA==
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

x86/xen: Fix memory leak in xen_init_lock_cpu()

In xen_init_lock_cpu(), the @name has allocated new string by kasprintf(),
if bind_ipi_to_irqhandler() fails, it should be freed, otherwise may lead
to a memory leak issue, fix it.

The Linux kernel CVE team has assigned CVE-2022-50761 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 4.9.337 with commit 9278bdbb566656b3704704f8dd6cbc24a6fcc569
	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 4.14.303 with commit 07764d00c869a3390bd4f80412cc8b0e669e6c58
	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 4.19.270 with commit 53ff99c76be611acea37d33133c9136969914865
	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 5.4.229 with commit 29198f667f4486f9e227e11faf1411fcf4c82a66
	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 5.10.163 with commit 70e7f308d7a8e915c7fbc0f1d959968eab8000cd
	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 5.15.86 with commit 70966d6b0f59f795b08a70adf5e4478348ecbfbb
	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 6.0.16 with commit 798fc3cf98ca07e448956f39295c5d686ab4b054
	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 6.1.2 with commit b44457b83a034efef58ffa5f3131d4615f1a9837
	Issue introduced in 2.6.27 with commit 2d9e1e2f58b5612aa4eab0ab54c84308a29dbd79 and fixed in 6.2 with commit ca84ce153d887b1dc8b118029976cc9faf2a9b40

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50761
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	arch/x86/xen/spinlock.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/9278bdbb566656b3704704f8dd6cbc24a6fcc569
	https://git.kernel.org/stable/c/07764d00c869a3390bd4f80412cc8b0e669e6c58
	https://git.kernel.org/stable/c/53ff99c76be611acea37d33133c9136969914865
	https://git.kernel.org/stable/c/29198f667f4486f9e227e11faf1411fcf4c82a66
	https://git.kernel.org/stable/c/70e7f308d7a8e915c7fbc0f1d959968eab8000cd
	https://git.kernel.org/stable/c/70966d6b0f59f795b08a70adf5e4478348ecbfbb
	https://git.kernel.org/stable/c/798fc3cf98ca07e448956f39295c5d686ab4b054
	https://git.kernel.org/stable/c/b44457b83a034efef58ffa5f3131d4615f1a9837
	https://git.kernel.org/stable/c/ca84ce153d887b1dc8b118029976cc9faf2a9b40
