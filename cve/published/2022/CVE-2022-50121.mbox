From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50121: remoteproc: k3-r5: Fix refcount leak in k3_r5_cluster_of_init

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

remoteproc: k3-r5: Fix refcount leak in k3_r5_cluster_of_init

Every iteration of for_each_available_child_of_node() decrements
the reference count of the previous node.
When breaking early from a for_each_available_child_of_node() loop,
we need to explicitly call of_node_put() on the child node.
Add missing of_node_put() to avoid refcount leak.

The Linux kernel CVE team has assigned CVE-2022-50121 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.10 with commit 6dedbd1d544389d6ab1727423348572a11e9df5d and fixed in 5.10.137 with commit 75358732af9b26acfe3e609943290bcba13330fc
	Issue introduced in 5.10 with commit 6dedbd1d544389d6ab1727423348572a11e9df5d and fixed in 5.15.61 with commit cf112a52d758092ca3d5ebdad51dd17bda5ba3e5
	Issue introduced in 5.10 with commit 6dedbd1d544389d6ab1727423348572a11e9df5d and fixed in 5.18.18 with commit 61cd8cd3b6b33c7eae3b45cf783b114f2ae53528
	Issue introduced in 5.10 with commit 6dedbd1d544389d6ab1727423348572a11e9df5d and fixed in 5.19.2 with commit 3f83c4cf1b78331c23876977aa7b9151aff2f9e1
	Issue introduced in 5.10 with commit 6dedbd1d544389d6ab1727423348572a11e9df5d and fixed in 6.0 with commit fa220c05d282e7479abe08b54e3bdffd06c25e97

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50121
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/remoteproc/ti_k3_r5_remoteproc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/75358732af9b26acfe3e609943290bcba13330fc
	https://git.kernel.org/stable/c/cf112a52d758092ca3d5ebdad51dd17bda5ba3e5
	https://git.kernel.org/stable/c/61cd8cd3b6b33c7eae3b45cf783b114f2ae53528
	https://git.kernel.org/stable/c/3f83c4cf1b78331c23876977aa7b9151aff2f9e1
	https://git.kernel.org/stable/c/fa220c05d282e7479abe08b54e3bdffd06c25e97
