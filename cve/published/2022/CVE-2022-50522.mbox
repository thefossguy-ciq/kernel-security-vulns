From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50522: mcb: mcb-parse: fix error handing in chameleon_parse_gdd()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

mcb: mcb-parse: fix error handing in chameleon_parse_gdd()

If mcb_device_register() returns error in chameleon_parse_gdd(), the refcount
of bus and device name are leaked. Fix this by calling put_device() to give up
the reference, so they can be released in mcb_release_dev() and kobject_cleanup().

The Linux kernel CVE team has assigned CVE-2022-50522 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 4.9.337 with commit 891f606ae0765bc9ca99f5276735be4d338f0255
	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 4.14.303 with commit cf6e70c0ced50b52415ac0c88eba1fb09c500a5a
	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 4.19.270 with commit fd85ece416fd7edb945203e59d4cd94952f77e7c
	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 5.4.229 with commit 110dc34c9fa33d37f55b394b1199ea6c0ad1ee84
	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 5.10.163 with commit 7b289b791a59386dc23a00d3cf17a0db984b40d3
	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 5.15.86 with commit 43bfc7c2402a22d3b4eb08c040f274ba2b76461a
	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 6.0.16 with commit b948baa29394ec5f4e6ec28486e7d06a76caee91
	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 6.1.2 with commit 4a9f1a8b3af287581ffb690d0e1593c681729ddb
	Issue introduced in 3.15 with commit 3764e82e5150d87b205c10cd78a9c9ab86fbfa51 and fixed in 6.2 with commit 728ac3389296caf68638628c987aeae6c8851e2d

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50522
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/mcb/mcb-parse.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/891f606ae0765bc9ca99f5276735be4d338f0255
	https://git.kernel.org/stable/c/cf6e70c0ced50b52415ac0c88eba1fb09c500a5a
	https://git.kernel.org/stable/c/fd85ece416fd7edb945203e59d4cd94952f77e7c
	https://git.kernel.org/stable/c/110dc34c9fa33d37f55b394b1199ea6c0ad1ee84
	https://git.kernel.org/stable/c/7b289b791a59386dc23a00d3cf17a0db984b40d3
	https://git.kernel.org/stable/c/43bfc7c2402a22d3b4eb08c040f274ba2b76461a
	https://git.kernel.org/stable/c/b948baa29394ec5f4e6ec28486e7d06a76caee91
	https://git.kernel.org/stable/c/4a9f1a8b3af287581ffb690d0e1593c681729ddb
	https://git.kernel.org/stable/c/728ac3389296caf68638628c987aeae6c8851e2d
