From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50431: ALSA: aoa: i2sbus: fix possible memory leak in i2sbus_add_dev()
Message-Id: <2025100158-CVE-2022-50431-b165@gregkh>
Content-Length: 3468
Lines: 63
X-Developer-Signature: v=1; a=openpgp-sha256; l=3532;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=1eIsGZ4F6xismiBFUQIAw2Pk61MnaplJM2fudnhNPOI=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBl3hdu4fB98WalxMVt6QcdeO5aL3O/+8YhsmO934+PEI
 1kl91+t64hlYRBkYpAVU2T5so3n6P6KQ4pehranYeawMoEMYeDiFICJ/PzMMD8iIFr6xedvyTXX
 V0pdeHsiN0vyRQvDfI+ee7+Y7q3magq4oNC2YGIcc8rL9QA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

ALSA: aoa: i2sbus: fix possible memory leak in i2sbus_add_dev()

dev_set_name() in soundbus_add_one() allocates memory for name, it need be
freed when of_device_register() fails, call soundbus_dev_put() to give up
the reference that hold in device_initialize(), so that it can be freed in
kobject_cleanup() when the refcount hit to 0. And other resources are also
freed in i2sbus_release_dev(), so it can return 0 directly.

The Linux kernel CVE team has assigned CVE-2022-50431 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 2.6.18 with commit f3d9478b2ce468c3115b02ecae7e975990697f15 and fixed in 4.9.332 with commit fd410d24665e4efb3c1796797181265efe553e9c
	Issue introduced in 2.6.18 with commit f3d9478b2ce468c3115b02ecae7e975990697f15 and fixed in 4.14.298 with commit 802532a50acf501fdafe38a84ca2aa886d68af68
	Issue introduced in 2.6.18 with commit f3d9478b2ce468c3115b02ecae7e975990697f15 and fixed in 4.19.264 with commit 027fee10e3a400cf6f3237374a1248da1082807b
	Issue introduced in 2.6.18 with commit f3d9478b2ce468c3115b02ecae7e975990697f15 and fixed in 5.4.223 with commit 5bdea674534153110b90d70b02f2fbaf48b2c0eb
	Issue introduced in 2.6.18 with commit f3d9478b2ce468c3115b02ecae7e975990697f15 and fixed in 5.10.153 with commit ce6fd1c382a38b75557db85a2fe99d285540a03d
	Issue introduced in 2.6.18 with commit f3d9478b2ce468c3115b02ecae7e975990697f15 and fixed in 5.15.77 with commit e81d7826b8f40430a1ea1b330e24d9a9eb4512c4
	Issue introduced in 2.6.18 with commit f3d9478b2ce468c3115b02ecae7e975990697f15 and fixed in 6.0.7 with commit c7524279c8ddc7dbf3463bec70e0289097959944
	Issue introduced in 2.6.18 with commit f3d9478b2ce468c3115b02ecae7e975990697f15 and fixed in 6.1 with commit 4a4c8482e370d697738a78dcd7bf2780832cb712

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50431
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	sound/aoa/soundbus/i2sbus/core.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/fd410d24665e4efb3c1796797181265efe553e9c
	https://git.kernel.org/stable/c/802532a50acf501fdafe38a84ca2aa886d68af68
	https://git.kernel.org/stable/c/027fee10e3a400cf6f3237374a1248da1082807b
	https://git.kernel.org/stable/c/5bdea674534153110b90d70b02f2fbaf48b2c0eb
	https://git.kernel.org/stable/c/ce6fd1c382a38b75557db85a2fe99d285540a03d
	https://git.kernel.org/stable/c/e81d7826b8f40430a1ea1b330e24d9a9eb4512c4
	https://git.kernel.org/stable/c/c7524279c8ddc7dbf3463bec70e0289097959944
	https://git.kernel.org/stable/c/4a4c8482e370d697738a78dcd7bf2780832cb712
