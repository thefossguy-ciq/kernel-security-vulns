From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-50523: clk: rockchip: Fix memory leak in rockchip_clk_register_pll()
Message-Id: <2025100705-CVE-2022-50523-d569@gregkh>
Content-Length: 3483
Lines: 63
X-Developer-Signature: v=1; a=openpgp-sha256; l=3547;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=gARH9iTcK7cwJIpwkaOp3qUzrx7yuabA2EnE010dsKk=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBlP9TOrFmwMrUjMKDbS+3PryK0dcQ4Tshql0s5O7n/Ob
 b75bPDSjlgWBkEmBlkxRZYv23iO7q84pOhlaHsaZg4rE8gQBi5OAZgI80qGBZtWafw4eW/2gWfP
 zCdfeGbh3+k/s59hfuni+uv9bzZHHbVU0M6dzfxPTXvrJgA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

clk: rockchip: Fix memory leak in rockchip_clk_register_pll()

If clk_register() fails, @pll->rate_table may have allocated memory by
kmemdup(), so it needs to be freed, otherwise will cause memory leak
issue, this patch fixes it.

The Linux kernel CVE team has assigned CVE-2022-50523 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 4.9.337 with commit 20201c3a0a32f127fa4bdf379d6ac01c2978702d
	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 4.14.303 with commit 86e1e080ad14c5fb6c14a5f0eb530b1b38cbc968
	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 4.19.270 with commit f02c1d8dc8d880cbaaf9094b4f396fe868ee23ff
	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 5.4.229 with commit 26b94635f1c84d7f6cb482179125cb17e59c90a5
	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 5.10.163 with commit f4d70c139d313948e02360304a6cbcd3a4f5deb5
	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 5.15.86 with commit 5b0a1f1247cd42ac5e0d369f8dbb58762692edee
	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 6.0.16 with commit dcd4ba068b194c6ef0071491aa3f12bec8c14d5b
	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 6.1.2 with commit f2ffb8653ea85ae39ce44347751fcc4c3e41f6bb
	Issue introduced in 3.17 with commit 90c590254051f511299538c158e12fdad41ce163 and fixed in 6.2 with commit 739a6a6bbdb793bd57938cb24aa5a6df89983546

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-50523
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/clk/rockchip/clk-pll.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/20201c3a0a32f127fa4bdf379d6ac01c2978702d
	https://git.kernel.org/stable/c/86e1e080ad14c5fb6c14a5f0eb530b1b38cbc968
	https://git.kernel.org/stable/c/f02c1d8dc8d880cbaaf9094b4f396fe868ee23ff
	https://git.kernel.org/stable/c/26b94635f1c84d7f6cb482179125cb17e59c90a5
	https://git.kernel.org/stable/c/f4d70c139d313948e02360304a6cbcd3a4f5deb5
	https://git.kernel.org/stable/c/5b0a1f1247cd42ac5e0d369f8dbb58762692edee
	https://git.kernel.org/stable/c/dcd4ba068b194c6ef0071491aa3f12bec8c14d5b
	https://git.kernel.org/stable/c/f2ffb8653ea85ae39ce44347751fcc4c3e41f6bb
	https://git.kernel.org/stable/c/739a6a6bbdb793bd57938cb24aa5a6df89983546
