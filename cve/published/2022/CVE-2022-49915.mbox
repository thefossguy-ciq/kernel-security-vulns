From bippy-1.1.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49915: mISDN: fix possible memory leak in mISDN_register_device()
Message-Id: <2025050106-CVE-2022-49915-ec43@gregkh>
Content-Length: 3455
Lines: 65
X-Developer-Signature: v=1; a=openpgp-sha256; l=3521;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=FrDujsC8yVE9E+1U8JC/qN2M4LO4TUUGmYN5yjtQZi4=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBnCDfvOhB996Hp2BsPm63uMXlcddH/l+Xa94BVmJu8bd
 Q/3T+7k6ohlYRBkYpAVU2T5so3n6P6KQ4pehranYeawMoEMYeDiFICJmAkzzGa9tiF8vsOnwx+X
 15yf8T5z9cSFLKwMC+ZZxPDNueMnG5Yg/vL50/TFh1+abQMA
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

mISDN: fix possible memory leak in mISDN_register_device()

Afer commit 1fa5ae857bb1 ("driver core: get rid of struct device's
bus_id string array"), the name of device is allocated dynamically,
add put_device() to give up the reference, so that the name can be
freed in kobject_cleanup() when the refcount is 0.

Set device class before put_device() to avoid null release() function
WARN message in device_release().

The Linux kernel CVE team has assigned CVE-2022-49915 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 4.9.333 with commit d1d1aede313eb2b9a84afd60ff6cfb7c33631e0e
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 4.14.299 with commit 080aabfb29b2ee9cbb8894a1d039651943d3773e
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 4.19.265 with commit a636fc5a7cabd05699b5692ad838c2c7a3abec7b
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 5.4.224 with commit 2ff6b669523d3b3d253a044fa9636a67d0694995
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 5.10.154 with commit e77d213843e67b4373285712699b692f9c743f61
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 5.15.78 with commit 029d5b7688a2f3a86f2a3be5a6ba9cc968c80e41
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 6.0.8 with commit 0d4e91efcaee081e919b3c50e875ecbb84290e41
	Issue introduced in 2.6.30 with commit 1fa5ae857bb14f6046205171d98506d8112dd74e and fixed in 6.1 with commit e7d1d4d9ac0dfa40be4c2c8abd0731659869b297

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49915
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/isdn/mISDN/core.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/d1d1aede313eb2b9a84afd60ff6cfb7c33631e0e
	https://git.kernel.org/stable/c/080aabfb29b2ee9cbb8894a1d039651943d3773e
	https://git.kernel.org/stable/c/a636fc5a7cabd05699b5692ad838c2c7a3abec7b
	https://git.kernel.org/stable/c/2ff6b669523d3b3d253a044fa9636a67d0694995
	https://git.kernel.org/stable/c/e77d213843e67b4373285712699b692f9c743f61
	https://git.kernel.org/stable/c/029d5b7688a2f3a86f2a3be5a6ba9cc968c80e41
	https://git.kernel.org/stable/c/0d4e91efcaee081e919b3c50e875ecbb84290e41
	https://git.kernel.org/stable/c/e7d1d4d9ac0dfa40be4c2c8abd0731659869b297
