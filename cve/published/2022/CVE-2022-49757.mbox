From bippy-5f407fcff5a0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2022-49757: EDAC/highbank: Fix memory leak in highbank_mc_probe()
Message-Id: <2025032702-CVE-2022-49757-a990@gregkh>
Content-Length: 3059
Lines: 62
X-Developer-Signature: v=1; a=openpgp-sha256; l=3122;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=o5m0EvX2FLC/yWpTzWwYfmstDaH59pqdwpaQLUYR7Xs=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDOlPG8SsxZjcOV4xOTn18X6I6VitrpfioZg+/cRaf3HdG
 8dbu0w6YlkYBJkYZMUUWb5s4zm6v+KQopeh7WmYOaxMIEMYuDgFYCL7rjAsOBIqsWNb05o1T/4e
 SbjDccba/VhhD8P88tOHb/13v7h6D0Nmx7NdfhflHnZdBwA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

EDAC/highbank: Fix memory leak in highbank_mc_probe()

When devres_open_group() fails, it returns -ENOMEM without freeing memory
allocated by edac_mc_alloc().

Call edac_mc_free() on the error handling path to avoid a memory leak.

  [ bp: Massage commit message. ]

The Linux kernel CVE team has assigned CVE-2022-49757 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.6 with commit a1b01edb274518c7da6d69b84e7558c092282aad and fixed in 4.14.305 with commit f1b3e23ed8df87d779ee86ac37f379e79a24169a
	Issue introduced in 3.6 with commit a1b01edb274518c7da6d69b84e7558c092282aad and fixed in 4.19.272 with commit 0db40e23b56d217eebd385bebb64057ef764b2c7
	Issue introduced in 3.6 with commit a1b01edb274518c7da6d69b84e7558c092282aad and fixed in 5.4.231 with commit 8d23f5d25264beb223ee79cdb530b88c237719fc
	Issue introduced in 3.6 with commit a1b01edb274518c7da6d69b84e7558c092282aad and fixed in 5.10.166 with commit 329fbd260352a7b9a83781d8b8bd96f95844a51f
	Issue introduced in 3.6 with commit a1b01edb274518c7da6d69b84e7558c092282aad and fixed in 5.15.91 with commit caffa7fed1397d1395052272c93900176de86557
	Issue introduced in 3.6 with commit a1b01edb274518c7da6d69b84e7558c092282aad and fixed in 6.1.9 with commit b7863ef8a8f0fee96b4eb41211f4918c0e047253
	Issue introduced in 3.6 with commit a1b01edb274518c7da6d69b84e7558c092282aad and fixed in 6.2 with commit e7a293658c20a7945014570e1921bf7d25d68a36

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2022-49757
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/edac/highbank_mc_edac.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/f1b3e23ed8df87d779ee86ac37f379e79a24169a
	https://git.kernel.org/stable/c/0db40e23b56d217eebd385bebb64057ef764b2c7
	https://git.kernel.org/stable/c/8d23f5d25264beb223ee79cdb530b88c237719fc
	https://git.kernel.org/stable/c/329fbd260352a7b9a83781d8b8bd96f95844a51f
	https://git.kernel.org/stable/c/caffa7fed1397d1395052272c93900176de86557
	https://git.kernel.org/stable/c/b7863ef8a8f0fee96b4eb41211f4918c0e047253
	https://git.kernel.org/stable/c/e7a293658c20a7945014570e1921bf7d25d68a36
