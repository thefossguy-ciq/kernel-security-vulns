From bippy-9e1c9544281a Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-50176: remoteproc: k3-r5: Fix error handling when power-up failed
Message-Id: <2024110806-CVE-2024-50176-8744@gregkh>
Content-Length: 2499
Lines: 58
X-Developer-Signature: v=1; a=openpgp-sha256; l=2558;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=Xsw9iHRi9bFZFyZR3MFJEjsokPgAbCt9IuMY3wpzI/U=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDOm6C8p8tV4/ENl/sb/kuCiDQ9dP/9sSrUZnNOIufha95
 O0mfv1vRywLgyATg6yYIsuXbTxH91ccUvQytD0NM4eVCWQIAxenAEzkqR3DfO9PjXMDnEW/iS6Z
 f33flp0Rr9SOL2eYn7yxQGq7M8eUs2fM3+lMreR5FLglCQA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

remoteproc: k3-r5: Fix error handling when power-up failed

By simply bailing out, the driver was violating its rule and internal
assumptions that either both or no rproc should be initialized. E.g.,
this could cause the first core to be available but not the second one,
leading to crashes on its shutdown later on while trying to dereference
that second instance.

The Linux kernel CVE team has assigned CVE-2024-50176 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 6.1.95 with commit 2a1ec20b174c and fixed in 6.1.113 with commit 87ab3af74477
	Issue introduced in 6.6.35 with commit 2494bc856e7c and fixed in 6.6.55 with commit fc71c2395893
	Issue introduced in 6.10 with commit 61f6f68447ab and fixed in 6.10.14 with commit afd102bde99d
	Issue introduced in 6.10 with commit 61f6f68447ab and fixed in 6.11.3 with commit 7afb5e3aa989
	Issue introduced in 6.10 with commit 61f6f68447ab and fixed in 6.12-rc1 with commit 9ab27eb5866c
	Issue introduced in 6.9.6 with commit 8ae2a10f5c70

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-50176
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/remoteproc/ti_k3_r5_remoteproc.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/87ab3af7447791d0c619610fd560bd804549e187
	https://git.kernel.org/stable/c/fc71c23958931713b5e76f317b76be37189f2516
	https://git.kernel.org/stable/c/afd102bde99d90ef41e043c846ea34b04433eb7b
	https://git.kernel.org/stable/c/7afb5e3aa989c479979faeb18768a67889a7a9c6
	https://git.kernel.org/stable/c/9ab27eb5866ccbf57715cfdba4b03d57776092fb
