From bippy-8e903de6a542 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-53060: drm/amdgpu: prevent NULL pointer dereference if ATIF is not supported
Message-Id: <2024111931-CVE-2024-53060-3b94@gregkh>
Content-Length: 2707
Lines: 70
X-Developer-Signature: v=1; a=openpgp-sha256; l=2778;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=4pQuLq1wPlpNGV9d4bWuJW4ofTCDAe1pGzQZKJHmx5I=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDOk2J8P9pXL9nn08635HpTi5cvfJhaov2RcUveZqa9kk5
 3fcgc+gI5aFQZCJQVZMkeXLNp6j+ysOKXoZ2p6GmcPKBDKEgYtTACYiosywYGs8w4FmD6YD3+5f
 KXvwIW7Zt765Bxlms7/kvjb9d8peyZkXpR8lVbK0rhb4AQA=
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supported

acpi_evaluate_object() may return AE_NOT_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.

Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.

Bail out also when status is AE_NOT_FOUND.

This fixes 1 FORWARD_NULL issue reported by Coverity
Report: CID 1600951:  Null pointer dereferences  (FORWARD_NULL)

(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)

The Linux kernel CVE team has assigned CVE-2024-53060 to this issue.


Affected and fixed versions
===========================

	Fixed in 4.19.324 with commit ce8a00a00e36
	Fixed in 5.4.286 with commit 8d7a28eca755
	Fixed in 5.10.230 with commit 2ac7f253dead
	Fixed in 5.15.172 with commit 27fc29b53769
	Fixed in 6.1.117 with commit 1a9f55ed5b51
	Fixed in 6.6.61 with commit a613a3924175
	Fixed in 6.11.8 with commit b9d9881237af
	Fixed in 6.12 with commit a6dd15981c03

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-53060
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/ce8a00a00e36f61f5a1e47734332420b68784c43
	https://git.kernel.org/stable/c/8d7a28eca7553d35d4ce192fa1f390f2357df41b
	https://git.kernel.org/stable/c/2ac7f253deada4d449559b65a1c1cd0a6f6f19b7
	https://git.kernel.org/stable/c/27fc29b5376998c126c85cf9b15d9dfc2afc9cbe
	https://git.kernel.org/stable/c/1a9f55ed5b512f510ccd21ad527d532e60550e80
	https://git.kernel.org/stable/c/a613a392417532ca5aaf3deac6e3277aa7aaef2b
	https://git.kernel.org/stable/c/b9d9881237afeb52eddd70077b7174bf17e2fa30
	https://git.kernel.org/stable/c/a6dd15981c03f2cdc9a351a278f09b5479d53d2e
