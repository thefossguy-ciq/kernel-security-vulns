From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2024-42160: f2fs: check validation of fault attrs in f2fs_build_fault_attr()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

f2fs: check validation of fault attrs in f2fs_build_fault_attr()

- It missed to check validation of fault attrs in parse_options(),
let's fix to add check condition in f2fs_build_fault_attr().
- Use f2fs_build_fault_attr() in __sbi_store() to clean up code.

The Linux kernel CVE team has assigned CVE-2024-42160 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.8 with commit 98e4da8ca301e062d79ae168c67e56f3c3de3ce4 and fixed in 5.15.181 with commit 6e5b601706ce05d94338cad598736d96bb8096c8
	Issue introduced in 3.8 with commit 98e4da8ca301e062d79ae168c67e56f3c3de3ce4 and fixed in 6.1.98 with commit bc84dd2c33e0c10fd90d60f0cfc0bfb504d4692d
	Issue introduced in 3.8 with commit 98e4da8ca301e062d79ae168c67e56f3c3de3ce4 and fixed in 6.6.39 with commit 44958ca9e400f57bd0478115519ffc350fcee61e
	Issue introduced in 3.8 with commit 98e4da8ca301e062d79ae168c67e56f3c3de3ce4 and fixed in 6.9.9 with commit ecb641f424d6d1f055d149a15b892edcc92c504b
	Issue introduced in 3.8 with commit 98e4da8ca301e062d79ae168c67e56f3c3de3ce4 and fixed in 6.10 with commit 4ed886b187f47447ad559619c48c086f432d2b77

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2024-42160
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	fs/f2fs/f2fs.h
	fs/f2fs/super.c
	fs/f2fs/sysfs.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/6e5b601706ce05d94338cad598736d96bb8096c8
	https://git.kernel.org/stable/c/bc84dd2c33e0c10fd90d60f0cfc0bfb504d4692d
	https://git.kernel.org/stable/c/44958ca9e400f57bd0478115519ffc350fcee61e
	https://git.kernel.org/stable/c/ecb641f424d6d1f055d149a15b892edcc92c504b
	https://git.kernel.org/stable/c/4ed886b187f47447ad559619c48c086f432d2b77
