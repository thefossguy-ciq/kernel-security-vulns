From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-38612: staging: fbtft: fix potential memory leak in fbtft_framebuffer_alloc()

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

staging: fbtft: fix potential memory leak in fbtft_framebuffer_alloc()

In the error paths after fb_info structure is successfully allocated,
the memory allocated in fb_deferred_io_init() for info->pagerefs is not
freed. Fix that by adding the cleanup function on the error path.

The Linux kernel CVE team has assigned CVE-2025-38612 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 5.4.297 with commit 83ea0c7b8d12c67f6c4703d6c458627a7fc45fc0
	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 5.10.241 with commit c3b1c45c48117ed4d8797ee89d1155f16b72d490
	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 5.15.190 with commit 3290f62f23fae05f2ec34085eb86dfb3648ef91f
	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 6.1.148 with commit 6f9e2cf9e9c1a891a683329af35bb33ed9d38b5f
	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 6.6.102 with commit b31cf6f7716a5d3e4461763f32d812acdaec6e74
	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 6.12.42 with commit a3177955f8da3c826a18b75e54881e2e9a9c96f1
	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 6.15.10 with commit 6771f121ae87490ddc19eabb7450383af9e01b6d
	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 6.16.1 with commit 47b3d6e8921bbb7b65c2dab8eaa8864901848c1c
	Issue introduced in 4.0 with commit c296d5f9957c03994a699d6739c27d4581a9f6c7 and fixed in 6.17 with commit eb2cb7dab60f9be0b435ac4a674255429a36d72c

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-38612
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/staging/fbtft/fbtft-core.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/83ea0c7b8d12c67f6c4703d6c458627a7fc45fc0
	https://git.kernel.org/stable/c/c3b1c45c48117ed4d8797ee89d1155f16b72d490
	https://git.kernel.org/stable/c/3290f62f23fae05f2ec34085eb86dfb3648ef91f
	https://git.kernel.org/stable/c/6f9e2cf9e9c1a891a683329af35bb33ed9d38b5f
	https://git.kernel.org/stable/c/b31cf6f7716a5d3e4461763f32d812acdaec6e74
	https://git.kernel.org/stable/c/a3177955f8da3c826a18b75e54881e2e9a9c96f1
	https://git.kernel.org/stable/c/6771f121ae87490ddc19eabb7450383af9e01b6d
	https://git.kernel.org/stable/c/47b3d6e8921bbb7b65c2dab8eaa8864901848c1c
	https://git.kernel.org/stable/c/eb2cb7dab60f9be0b435ac4a674255429a36d72c
