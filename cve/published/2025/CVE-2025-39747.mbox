From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-39747: drm/msm: Add error handling for krealloc in metadata setup

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/msm: Add error handling for krealloc in metadata setup

Function msm_ioctl_gem_info_set_metadata() now checks for krealloc
failure and returns -ENOMEM, avoiding potential NULL pointer dereference.
Explicitly avoids __GFP_NOFAIL due to deadlock risks and allocation constraints.

Patchwork: https://patchwork.freedesktop.org/patch/661235/

The Linux kernel CVE team has assigned CVE-2025-39747 to this issue.


Affected and fixed versions
===========================

	Fixed in 6.12.43 with commit 53dc780c1e94ea782d8936b41bfaa83c663702eb
	Fixed in 6.15.11 with commit 01e3eda8edc3c4caaa49261d1a56c799b0bd6268
	Fixed in 6.16.2 with commit d5386bcede7b57b193c658dcbb9d22004cde7580
	Fixed in 6.17-rc1 with commit 1c8c354098ea9d4376a58c96ae6b65288a6f15d8

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-39747
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/msm/msm_drv.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/53dc780c1e94ea782d8936b41bfaa83c663702eb
	https://git.kernel.org/stable/c/01e3eda8edc3c4caaa49261d1a56c799b0bd6268
	https://git.kernel.org/stable/c/d5386bcede7b57b193c658dcbb9d22004cde7580
	https://git.kernel.org/stable/c/1c8c354098ea9d4376a58c96ae6b65288a6f15d8
