From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-38105: ALSA: usb-audio: Kill timer properly at removal

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

ALSA: usb-audio: Kill timer properly at removal

The USB-audio MIDI code initializes the timer, but in a rare case, the
driver might be freed without the disconnect call.  This leaves the
timer in an active state while the assigned object is released via
snd_usbmidi_free(), which ends up with a kernel warning when the debug
configuration is enabled, as spotted by fuzzer.

For avoiding the problem, put timer_shutdown_sync() at
snd_usbmidi_free(), so that the timer can be killed properly.
While we're at it, replace the existing timer_delete_sync() at the
disconnect callback with timer_shutdown_sync(), too.

The Linux kernel CVE team has assigned CVE-2025-38105 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 2.6.14 with commit c88469704d63787e8d44ca5ea1c1bd0adc29572d and fixed in 6.6.111 with commit 647410a7da46067953a53c0d03f8680eff570959
	Issue introduced in 2.6.14 with commit c88469704d63787e8d44ca5ea1c1bd0adc29572d and fixed in 6.12.52 with commit c611b9e55174e439dcd85a72969b43a95f3827a4
	Issue introduced in 2.6.14 with commit c88469704d63787e8d44ca5ea1c1bd0adc29572d and fixed in 6.15.3 with commit 62066758d2ae169278e5d6aea5995b1b6f6ddeb5
	Issue introduced in 2.6.14 with commit c88469704d63787e8d44ca5ea1c1bd0adc29572d and fixed in 6.16 with commit 0718a78f6a9f04b88d0dc9616cc216b31c5f3cf1

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-38105
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	sound/usb/midi.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/647410a7da46067953a53c0d03f8680eff570959
	https://git.kernel.org/stable/c/c611b9e55174e439dcd85a72969b43a95f3827a4
	https://git.kernel.org/stable/c/62066758d2ae169278e5d6aea5995b1b6f6ddeb5
	https://git.kernel.org/stable/c/0718a78f6a9f04b88d0dc9616cc216b31c5f3cf1
