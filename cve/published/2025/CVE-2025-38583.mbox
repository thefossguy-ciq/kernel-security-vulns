From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-38583: clk: xilinx: vcu: unregister pll_post only if registered correctly

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

clk: xilinx: vcu: unregister pll_post only if registered correctly

If registration of pll_post is failed, it will be set to NULL or ERR,
unregistering same will fail with following call trace:

Unable to handle kernel NULL pointer dereference at virtual address 008
pc : clk_hw_unregister+0xc/0x20
lr : clk_hw_unregister_fixed_factor+0x18/0x30
sp : ffff800011923850
...
Call trace:
 clk_hw_unregister+0xc/0x20
 clk_hw_unregister_fixed_factor+0x18/0x30
 xvcu_unregister_clock_provider+0xcc/0xf4 [xlnx_vcu]
 xvcu_probe+0x2bc/0x53c [xlnx_vcu]

The Linux kernel CVE team has assigned CVE-2025-38583 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.12 with commit 4472e1849db7f719bbf625890096e0269b5849fe and fixed in 5.15.190 with commit 7e903da71f8bec4beb7c06707900e1ed8db843ca
	Issue introduced in 5.12 with commit 4472e1849db7f719bbf625890096e0269b5849fe and fixed in 6.1.148 with commit 88bd875b7f9c3652c27d6e4bb7a23701b764f762
	Issue introduced in 5.12 with commit 4472e1849db7f719bbf625890096e0269b5849fe and fixed in 6.6.102 with commit 51990eecf22f446550befdfd1a9f54147eafd636
	Issue introduced in 5.12 with commit 4472e1849db7f719bbf625890096e0269b5849fe and fixed in 6.12.42 with commit f1a1be99d5ae53d3b404415f1665eb59e8e02a8c
	Issue introduced in 5.12 with commit 4472e1849db7f719bbf625890096e0269b5849fe and fixed in 6.15.10 with commit 86124c5cfceb5ac04d2fddbf1b6f7147332d96a3
	Issue introduced in 5.12 with commit 4472e1849db7f719bbf625890096e0269b5849fe and fixed in 6.16.1 with commit a72b1c2d3b53e088bfaeb593949ff6fbd2cbe8ed
	Issue introduced in 5.12 with commit 4472e1849db7f719bbf625890096e0269b5849fe and fixed in 6.17 with commit 3b0abc443ac22f7d4f61ddbbbbc5dbb06c87139d

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-38583
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/clk/xilinx/xlnx_vcu.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/7e903da71f8bec4beb7c06707900e1ed8db843ca
	https://git.kernel.org/stable/c/88bd875b7f9c3652c27d6e4bb7a23701b764f762
	https://git.kernel.org/stable/c/51990eecf22f446550befdfd1a9f54147eafd636
	https://git.kernel.org/stable/c/f1a1be99d5ae53d3b404415f1665eb59e8e02a8c
	https://git.kernel.org/stable/c/86124c5cfceb5ac04d2fddbf1b6f7147332d96a3
	https://git.kernel.org/stable/c/a72b1c2d3b53e088bfaeb593949ff6fbd2cbe8ed
	https://git.kernel.org/stable/c/3b0abc443ac22f7d4f61ddbbbbc5dbb06c87139d
