From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-40011: drm/gma500: Fix null dereference in hdmi teardown

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/gma500: Fix null dereference in hdmi teardown

pci_set_drvdata sets the value of pdev->driver_data to NULL,
after which the driver_data obtained from the same dev is
dereferenced in oaktrail_hdmi_i2c_exit, and the i2c_dev is
extracted from it. To prevent this, swap these calls.

Found by Linux Verification Center (linuxtesting.org) with Svacer.

The Linux kernel CVE team has assigned CVE-2025-40011 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 3.3 with commit 1b082ccf5901108d3acd860a73d8c0442556c0bb and fixed in 5.4.300 with commit 70b0c11483d3b90b2d0f416026e475e084a77e62
	Issue introduced in 3.3 with commit 1b082ccf5901108d3acd860a73d8c0442556c0bb and fixed in 5.10.245 with commit 4bbfd1b290857b9d14ea9d91562bde55ff2bc85e
	Issue introduced in 3.3 with commit 1b082ccf5901108d3acd860a73d8c0442556c0bb and fixed in 5.15.194 with commit e15de80737d444ed743b1c60ced4a3a97913169b
	Issue introduced in 3.3 with commit 1b082ccf5901108d3acd860a73d8c0442556c0bb and fixed in 6.1.155 with commit 02e4ff4941efb9bbb40d8d5b61efa1a4119b1ba7
	Issue introduced in 3.3 with commit 1b082ccf5901108d3acd860a73d8c0442556c0bb and fixed in 6.6.109 with commit 6ffa6b5bc861a3ea9dfcdc007f002b4a347c24ba
	Issue introduced in 3.3 with commit 1b082ccf5901108d3acd860a73d8c0442556c0bb and fixed in 6.12.50 with commit f800f7054d2cf28b51296c7c575da27c29e3859b
	Issue introduced in 3.3 with commit 1b082ccf5901108d3acd860a73d8c0442556c0bb and fixed in 6.16.10 with commit 0fc650fa475b50c1da8236c5e900b9460c7027bc
	Issue introduced in 3.3 with commit 1b082ccf5901108d3acd860a73d8c0442556c0bb and fixed in 6.17 with commit 352e66900cde63f3dadb142364d3c35170bbaaff

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-40011
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/gma500/oaktrail_hdmi.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/70b0c11483d3b90b2d0f416026e475e084a77e62
	https://git.kernel.org/stable/c/4bbfd1b290857b9d14ea9d91562bde55ff2bc85e
	https://git.kernel.org/stable/c/e15de80737d444ed743b1c60ced4a3a97913169b
	https://git.kernel.org/stable/c/02e4ff4941efb9bbb40d8d5b61efa1a4119b1ba7
	https://git.kernel.org/stable/c/6ffa6b5bc861a3ea9dfcdc007f002b4a347c24ba
	https://git.kernel.org/stable/c/f800f7054d2cf28b51296c7c575da27c29e3859b
	https://git.kernel.org/stable/c/0fc650fa475b50c1da8236c5e900b9460c7027bc
	https://git.kernel.org/stable/c/352e66900cde63f3dadb142364d3c35170bbaaff
