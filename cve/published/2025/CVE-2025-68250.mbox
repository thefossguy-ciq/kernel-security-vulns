From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-68250: hung_task: fix warnings caused by unaligned lock pointers
Message-Id: <2025121623-CVE-2025-68250-9b9c@gregkh>
Content-Length: 2277
Lines: 58
X-Developer-Signature: v=1; a=openpgp-sha256; l=2336;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=HVZwf2KUr+F4/JkV9V2nMl3pd+FsdSCktz7Mj0OeMIw=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDJmOueX1n3/Jq1cH+P4+aO9l2HvhZbfcoZQg4z3R5wKdf
 3rzvyvuiGVhEGRikBVTZPmyjefo/opDil6Gtqdh5rAygQxh4OIUgIksmsiw4Nq1rUaK7+/aqJzu
 yapceiCSP+7Ke4b5ua++xBnLJ1ReiTXQk4hxbxS/YxYNAA==
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

hung_task: fix warnings caused by unaligned lock pointers

The blocker tracking mechanism assumes that lock pointers are at least
4-byte aligned to use their lower bits for type encoding.

However, as reported by Eero Tamminen, some architectures like m68k
only guarantee 2-byte alignment of 32-bit values. This breaks the
assumption and causes two related WARN_ON_ONCE checks to trigger.

To fix this, the runtime checks are adjusted to silently ignore any lock
that is not 4-byte aligned, effectively disabling the feature in such
cases and avoiding the related warnings.

Thanks to Geert Uytterhoeven for bisecting!

The Linux kernel CVE team has assigned CVE-2025-68250 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 6.16 with commit e711faaafbe54a884f33b53472434063d342f6d4 and fixed in 6.17.6 with commit c0e2dcbe54cb15ecdf9d8f4501c6720423243888
	Issue introduced in 6.16 with commit e711faaafbe54a884f33b53472434063d342f6d4 and fixed in 6.18 with commit c97513cddcfc235f2522617980838e500af21d01

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-68250
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	include/linux/hung_task.h


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/c0e2dcbe54cb15ecdf9d8f4501c6720423243888
	https://git.kernel.org/stable/c/c97513cddcfc235f2522617980838e500af21d01
