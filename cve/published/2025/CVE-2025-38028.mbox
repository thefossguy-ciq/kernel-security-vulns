From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-38028: NFS/localio: Fix a race in nfs_local_open_fh()
Message-Id: <2025061848-CVE-2025-38028-41ef@gregkh>
Content-Length: 1905
Lines: 49
X-Developer-Signature: v=1; a=openpgp-sha256; l=1955;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=1paT7ETmNCZevMkLKZRHfeWZXQ2f8bD9EmVBKTIktG0=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBlBbRfD7vAs2ZIumOgg4KSUnX2AvSH0pmpVUhvvbsv1H
 YFNwqs6YlkYBJkYZMUUWb5s4zm6v+KQopeh7WmYOaxMIEMYuDgFYCIZVgwLOiq23712uOh0q1nb
 piaXVSFdMww3MswzfrCJeeXN1Q4sN2ODW5kni8bEX2oAAA==
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

NFS/localio: Fix a race in nfs_local_open_fh()

Once the clp->cl_uuid.lock has been dropped, another CPU could come in
and free the struct nfsd_file that was just added. To prevent that from
happening, take the RCU read lock before dropping the spin lock.

The Linux kernel CVE team has assigned CVE-2025-38028 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 6.14 with commit 86e00412254a717ffd5d38dc5ec0ee1cce6281b3 and fixed in 6.14.8 with commit 185a2f2ddabdcf999823f61de67f86376883920d
	Issue introduced in 6.14 with commit 86e00412254a717ffd5d38dc5ec0ee1cce6281b3 and fixed in 6.15 with commit fa7ab64f1e2fdc8f2603aab8e0dd20de89cb10d9

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-38028
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	fs/nfs/localio.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/185a2f2ddabdcf999823f61de67f86376883920d
	https://git.kernel.org/stable/c/fa7ab64f1e2fdc8f2603aab8e0dd20de89cb10d9
