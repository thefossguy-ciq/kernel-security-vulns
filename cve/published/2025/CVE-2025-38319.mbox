From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-38319: drm/amd/pp: Fix potential NULL pointer dereference in atomctrl_initialize_mc_reg_table
Message-Id: <2025071016-CVE-2025-38319-de26@gregkh>
Content-Length: 2941
Lines: 59
X-Developer-Signature: v=1; a=openpgp-sha256; l=3001;
 i=gregkh@linuxfoundation.org; h=from:subject:message-id;
 bh=4F9uz79ojgjYuAJRvx+aA49uaBixmIEJujTtDetlTi0=;
 b=owGbwMvMwCRo6H6F97bub03G02pJDBn5eTeO3elOcAqPLLwotVH7zMJyubdZz17HR+5MFL3Xf
 /5U+kb5jlgWBkEmBlkxRZYv23iO7q84pOhlaHsaZg4rE8gQBi5OAZjImTiGuWJFe3+te8FXKbms
 mKE07HV5oca01wzztOPvFrLJOH3z44g6c3KHaNquya+9AQ==
X-Developer-Key: i=gregkh@linuxfoundation.org; a=openpgp;
 fpr=F4B60CC5BF78C2214A313DCB3147D40DDB2DFB29

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

drm/amd/pp: Fix potential NULL pointer dereference in atomctrl_initialize_mc_reg_table

The function atomctrl_initialize_mc_reg_table() and
atomctrl_initialize_mc_reg_table_v2_2() does not check the return
value of smu_atom_get_data_table(). If smu_atom_get_data_table()
fails to retrieve vram_info, it returns NULL which is later
dereferenced.

The Linux kernel CVE team has assigned CVE-2025-38319 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 4.18 with commit b3892e2bb519fe18225d0628f0dd255761f16502 and fixed in 5.15.186 with commit 85cdcb834fb490731ff2d123f87ca799c57dacf2
	Issue introduced in 4.18 with commit b3892e2bb519fe18225d0628f0dd255761f16502 and fixed in 6.1.142 with commit 7080c20a9139842033ed4af604dc1fa4028593ad
	Issue introduced in 4.18 with commit b3892e2bb519fe18225d0628f0dd255761f16502 and fixed in 6.6.94 with commit cdf7e1ff99ab06ef15d0b5d1aca5258a4fb62b85
	Issue introduced in 4.18 with commit b3892e2bb519fe18225d0628f0dd255761f16502 and fixed in 6.12.34 with commit 64f3acc8c7e6809631457b75638601b36dea3129
	Issue introduced in 4.18 with commit b3892e2bb519fe18225d0628f0dd255761f16502 and fixed in 6.15.3 with commit a4ff7391c8b75b1541900bd9d0c238e558c11fb3
	Issue introduced in 4.18 with commit b3892e2bb519fe18225d0628f0dd255761f16502 and fixed in 6.16-rc1 with commit 820116a39f96bdc7d426c33a804b52f53700a919

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-38319
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/gpu/drm/amd/pm/powerplay/hwmgr/ppatomctrl.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/85cdcb834fb490731ff2d123f87ca799c57dacf2
	https://git.kernel.org/stable/c/7080c20a9139842033ed4af604dc1fa4028593ad
	https://git.kernel.org/stable/c/cdf7e1ff99ab06ef15d0b5d1aca5258a4fb62b85
	https://git.kernel.org/stable/c/64f3acc8c7e6809631457b75638601b36dea3129
	https://git.kernel.org/stable/c/a4ff7391c8b75b1541900bd9d0c238e558c11fb3
	https://git.kernel.org/stable/c/820116a39f96bdc7d426c33a804b52f53700a919
