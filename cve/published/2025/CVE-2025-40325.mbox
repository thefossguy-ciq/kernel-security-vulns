From bippy-1.2.0 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@kernel.org>
To: <linux-cve-announce@vger.kernel.org>
Reply-to: <cve@kernel.org>, <linux-kernel@vger.kernel.org>
Subject: CVE-2025-40325: md/raid10: wait barrier before returning discard request with REQ_NOWAIT

Description
===========

In the Linux kernel, the following vulnerability has been resolved:

md/raid10: wait barrier before returning discard request with REQ_NOWAIT

raid10_handle_discard should wait barrier before returning a discard bio
which has REQ_NOWAIT. And there is no need to print warning calltrace
if a discard bio has REQ_NOWAIT flag. Quality engineer usually checks
dmesg and reports error if dmesg has warning/error calltrace.

The Linux kernel CVE team has assigned CVE-2025-40325 to this issue.


Affected and fixed versions
===========================

	Issue introduced in 5.17 with commit c9aa889b035fca4598ae985a0f0c76ebbb547ad2 and fixed in 6.12.64 with commit 31ff67982c5fa39c0093b9d9f429fef91c2494b7
	Issue introduced in 5.17 with commit c9aa889b035fca4598ae985a0f0c76ebbb547ad2 and fixed in 6.14.2 with commit 31d3156efe909b53ba174861a3da880c688f5edc
	Issue introduced in 5.17 with commit c9aa889b035fca4598ae985a0f0c76ebbb547ad2 and fixed in 6.15 with commit 3db4404435397a345431b45f57876a3df133f3b4
	Issue introduced in 5.15.111 with commit 39db562b3fedb93978a7e42dd216b306740959f8

Please see https://www.kernel.org for a full list of currently supported
kernel versions by the kernel community.

Unaffected versions might change over time as fixes are backported to
older supported kernel versions.  The official CVE entry at
	https://cve.org/CVERecord/?id=CVE-2025-40325
will be updated if fixes are backported, please check that for the most
up to date information about this issue.


Affected files
==============

The file(s) affected by this issue are:
	drivers/md/raid10.c


Mitigation
==========

The Linux kernel CVE team recommends that you update to the latest
stable kernel version for this, and many other bugfixes.  Individual
changes are never tested alone, but rather are part of a larger kernel
release.  Cherry-picking individual commits is not recommended or
supported by the Linux kernel community at all.  If however, updating to
the latest release is impossible, the individual changes to resolve this
issue can be found at these commits:
	https://git.kernel.org/stable/c/31ff67982c5fa39c0093b9d9f429fef91c2494b7
	https://git.kernel.org/stable/c/31d3156efe909b53ba174861a3da880c688f5edc
	https://git.kernel.org/stable/c/3db4404435397a345431b45f57876a3df133f3b4
